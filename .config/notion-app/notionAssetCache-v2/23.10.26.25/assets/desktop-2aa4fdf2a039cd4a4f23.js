"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[380],{60951:(e,t,a)=>{a.r(t),a.d(t,{PushNotification:()=>N});a(41817);var o=a(96486),r=a.n(o),c=a(40902),s=a(66897),n=a(99036),i=a(55061),l=a(21202),d=a(6287),m=a(13493),u=a(70279),p=a(19889),b=a(70203),f=a(9900),g=a(64002);function N(e){const{activity:t,getRecordValue:a,baseURL:o,userTimeZone:N,intl:_}=e,y=(0,i.P6)({...e}),k=(0,i.XW)(y,_),J=(0,i.oP)({...e,intl:_}),q=(0,i.iR)({...e,intl:_}),M=(0,i.rn)({...e,intl:_});switch(t.type){case"top-level-block-created":return{subject:_.formatMessage(i.qJ.topLevelBlockCreated,{userName:k,targetName:J,spaceName:M})};case"top-level-block-deleted":return{subject:_.formatMessage(i.qJ.topLevelBlockDeleted,{userName:k,targetName:J,spaceName:M})};case"collection-row-created":return{subject:_.formatMessage(i.qJ.collectionRowCreated,{userName:k,targetName:J,collectionName:q})};case"collection-row-deleted":return{subject:_.formatMessage(i.qJ.collectionRowDeleted,{userName:k,targetName:J,collectionName:q})};case"block-edited":{let s;if(t.edits){const l=t.edits[0];if("block-changed"===l.type){const t=l.block_data.after.block_value;if("page"===t.type&&t.parent_table===d.v){const t=l.block_schema||n.Kc(_),o=c.OS({before:l.block_data.before.block_value,after:l.block_data.after.block_value,schema:t}).filter((e=>{const a=t[e];return a&&"formula"!==a.type})).map((o=>{const r=t[o],c=r?r.name:void 0,s=(0,i.Wy)({intl:_,property:o,schema:t,block:l.block_data.after.block_value,getRecordValue:a,userTimeZone:e.userTimeZone,baseURL:e.baseURL})||_.formatMessage(i.qJ.emptyBlockEditedProperty);return _.formatMessage(i.qJ.propertyNameAndValueEdited,{propertyName:c,propertyValue:s})})),d=c.B9({before:l.block_data.before.block_value,after:l.block_data.after.block_value}),m=r().compact(d.map((e=>{const t=(0,i._u)({formatProperty:e,intl:_}),o=(0,i.W9)({formatProperty:e,intl:_,block:l.block_data.after.block_value,getRecordValue:a});if(t&&o)return _.formatMessage(i.qJ.propertyNameAndValueEdited,{propertyName:t,propertyValue:o})})));s=_.formatList(o.concat(m),{type:"conjunction",style:"narrow"})}else s=(0,i._2)({intl:_,blockValue:t,getRecordValue:a,baseURL:o,userTimeZone:N})}else if("block-created"===l.type){const e=l.block_data.block_value;s=(0,i._2)({intl:_,blockValue:e,getRecordValue:a,baseURL:o,userTimeZone:N})}else if("block-deleted"===l.type){const e=l.block_data.block_value,t=(0,i._2)({intl:_,blockValue:e,getRecordValue:a,baseURL:o,userTimeZone:N});s=_.formatMessage(i.qJ.blockDeletedEditBody,{renderedBlock:t})}}return{subject:_.formatMessage(i.qJ.blockEditedNotification,{userName:k,blockName:J}),body:s}}case"permissions-edited":return{subject:_.formatMessage(i.qJ.userEditedPermissionsFor,{userName:k,targetName:J}),body:(0,i.gt)({intl:_,activity:t,getRecordValue:a,userTimeZone:e.userTimeZone})};case"user-mentioned":return{subject:_.formatMessage(i.qJ.userMentionedIn,{userName:k,targetName:J}),body:(0,i.kU)({intl:_,getRecordValue:a,baseURL:o,userTimeZone:e.userTimeZone,blockId:t.mentioned_block_id,property:t.mentioned_property})};case"commented":{let o;if(t.edits){const r=t.edits[0];if("comment-created"===r.type){const t=a({table:u.x_,id:r.comment_id,spaceId:r.space_id}),c=r.comment_data||t;c&&(o="ðŸ’¬ ".concat(f.Xh({intl:_,textValue:c.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone})))}else if("comment-changed"===r.type)o="ðŸ’¬ ".concat(f.Xh({intl:_,textValue:r.comment_data.after.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone}));else{const t=a({table:u.x_,id:r.comment_id,spaceId:r.space_id}),c=r.comment_data||t;if(c){const t=f.Xh({intl:_,textValue:c.text,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone});o=_.formatMessage(i.qJ.userDeletedComment,{commentText:t})}}}return{subject:_.formatMessage(i.qJ.userCommentedSubject,{userName:k,targetName:J}),body:o}}case"user-invited":const v=(0,g.pE)(J),j=v.length>0?v:_.formatMessage(i.qJ.defaultPageName);if(t.permission_group_id)return{subject:_.formatMessage(i.qJ.userAddedToSpace,{userName:k,workspaceName:j})};return{subject:0===y.filter(s.uC).length?_.formatMessage(i.qJ.userInvitedToSpaceByBot,{workspaceName:j}):_.formatMessage(i.qJ.userInvitedToSpace,{userName:k,workspaceName:j})};case"collection-edited":{let e,a=_.formatMessage(i.qJ.userEditedCollectionSubject,{userName:k,collectionName:J});if(t.edits){const o=t.edits[0];if("collection-changed"===o.type&&o.collection_data){const t=o.collection_data.after?o.collection_data.after.description:void 0,r=o.collection_data.before?o.collection_data.before.description:void 0;r&&!t?a=_.formatMessage(i.qJ.collectionDescriptionDeleted,{userName:k,collectionName:J}):!r&&t?(a=_.formatMessage(i.qJ.collectionDescriptionCreated,{userName:k,collectionName:J}),e=b.Jc(t)):r&&t&&c.Dn(r,t)&&(e=b.Jc(t))}else if("collection-created"===o.type&&o.collection_data){const t=o.collection_data.description;t&&(a=_.formatMessage(i.qJ.userCreatedCollectionSubject,{userName:k,collectionName:J}),e=b.Jc(t))}}return{subject:a,body:e}}case"collection-view-edited":const R=e.getRecordValue({table:m.n,id:t.collection_view_id,spaceId:t.space_id}),V=R&&R.name||_.formatMessage(i.qJ.untitledCollectionView);return{subject:_.formatMessage(i.qJ.collectionViewEditedSubject,{userName:k,collectionViewName:V,collectionName:J})};case"collection-property-edited":const h=t.edits&&t.edits[0],T=h&&("collection-property-changed"===h.type?h.collection_property_data.after.name:h.collection_property_data.name)||_.formatMessage(i.qJ.collectionPropertyEditedUnknown);return t.collection_property_id,{subject:_.formatMessage(i.qJ.collectionPropertyEditedSubject,{userName:k,propertyType:T,collectionName:J})};case"reminder":return{subject:_.formatMessage(i.qJ.reminderSubject,{pageName:J}),body:(0,i.kU)({getRecordValue:a,baseURL:o,userTimeZone:e.userTimeZone,blockId:t.reminder_block_id,property:t.reminder_property,intl:_})};case"permission-group-edited":return{subject:(0,i.pF)({activity:t,intl:_,userName:k,targetName:J})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===t.type?_.formatMessage(i.qJ.pageLockedActivity,{userName:k,pageName:J}):_.formatMessage(i.qJ.pageUnlockedActivity,{userName:k,pageName:J})};case"email-edited":return{subject:_.formatMessage(i.qJ.emailEditedActivity,{userName:k})};case"access-requested":return{subject:t.parent_table===l.iU?_.formatMessage(i.qJ.accessRequestedSubject,{userName:k,pageName:J}):_.formatMessage(i.qJ.membershipRequestedSubject,{userName:k,workspaceName:J})};case"page-deleted":return{subject:_.formatMessage(i.qJ.pageDeletedActivity,{userName:k})};case"page-restored":return{subject:_.formatMessage(i.qJ.pageRestoredActivity,{userName:k})};case"page-permanently-deleted":return{subject:_.formatMessage(i.qJ.pagePermanentlyDeletedActivity,{userName:k})};case"team-membership-edited":return{subject:_.formatMessage(i.qJ.userInvitedToTeam,{userName:k,teamName:J})};case"private-content-transferred":const w=t.edits&&t.edits[0].from_user_id;if(!w)return{subject:_.formatMessage({description:"Notification that shows when private content is transferred but there is no from user name.",defaultMessage:"{author} transferred private content to you: {pageName}",id:"pushNotification.privateContentTransferred.noFromUserName"},{author:k,pageName:J})};const Z=a({table:p.KJ,id:w});return{subject:_.formatMessage(i.qJ.privateContentTransferred,{author:k,pageName:J,fromUserName:(0,p.Js)(_,Z)})}}}}}]);