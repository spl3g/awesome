"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[414],{7512:(e,t,s)=>{s.d(t,{A:()=>g,t:()=>h});var i=s(5366),o=s(33929),r=s(27832),n=s(39218),a=s(50906),l=s(54642),d=s(47307),u=s(92625),c=s(97977),p=s(9953);const m=(0,i.defineMessages)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}}),g=function(e){const{userStore:t,data:s,transaction:i}=e,o={};s.name&&(o.name=s.name),o.profile_photo=s.profilePhoto,p.sW({store:t,data:o,transaction:i})};async function h(e){u.j({message:m.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:i}=r.default.state;if(!s||!i||!t)return u.x(),void d.showErrorMessage(o.default.formatMessage(m.noUserError));a.trackDeleteUser(e),await l.deleteUser(e,{}),await n.transactionQueue.clearForUser(t),c.logoutSingleAccount({environment:e,userId:t}),u.x()}},5851:(e,t,s)=>{s.d(t,{n:()=>r});var i=s(29974),o=s(93561);function r(e,t){const{securitySettingsState:s,spaceStore:r}=t,{disablePublicAccess:n,disableGuests:a,disableMoveToSpace:l,disableExport:d,disableSpacePageEdits:u,disablePublicAccessRequests:c,disablePersonalBots:p,disableTeamCreation:m,disableMembershipRequests:g}=s;return o.createAndCommit({userAction:"securitySettingsActions.saveSecuritySettings",environment:e,perform:t=>{i.Xr({environment:e,transaction:t,spaceStore:r,disablePublicAccess:n,disableGuests:a,disableMoveToSpace:l,disableExport:d,disableSpacePageEdits:u,disablePublicAccessRequests:c,disablePersonalBots:p,disableTeamCreation:m,disableMembershipRequests:g})}})}},97832:(e,t,s)=>{s.d(t,{Z:()=>C});var i=s(77094),o=s.n(i),r=s(77422),n=s.n(r),a=(s(33948),s(96486)),l=s.n(a),d=(s(67294),s(83355)),u=s(8848),c=s(90965),p=s(82990),m=s(5366),g=s(7512),h=s(50906),b=s(86080),f=s(38755),v=s(27832),S=s(92083),y=s(93007),w=s(47966),M=s(23189);class k extends d.Z{constructor(){super(...arguments),n()(this,"handleDeleteAccountClick",(async()=>{const{currentUserStore:e,currentUserRootStore:t}=v.default.state;if(!e||!t)return;const s=e.getValue();if(!s)return;const i=l().compact(t.getSpaceViewStores().map((e=>e.getSpaceStore()))).filter((e=>!(0,c.XO)(s.id,e.getValue(),e.getRole()))),r=l().compact(i.map((e=>(0,f.getSpaceName)(this.environment,e))));h.trackDeleteAccountClicked(this.environment);await b.b({width:420,message:o()("div",{},void 0,o()("div",{},void 0,o()(m.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}),r.length>0&&o()("ul",{style:{padding:0}},void 0,r.map((e=>o()("li",{style:{marginTop:6,color:u.ZP.red,fontWeight:p.Z.fontWeight.medium,listStyle:"none"}},void 0,e))))," ",o()(m.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})),o()(y.Z,{style:{marginTop:16},translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}})),acceptLabel:0===r.length?o()(m.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):this.environment.device.isMobile?o()(m.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",description:"The confirmation button on mobile when the user is trying to delete their account.",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:r.length}}):o()(m.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:r.length}}),requiredInputValue:s.email})&&(h.trackDeleteAccountConfirmed(this.environment),S.ZP.reset(),g.t(this.environment))}))}renderComponent(){return[o()(M.Z,{},void 0,o()(m.FormattedMessage,{id:"profileSettings.dangerousSettings.title",defaultMessage:"Danger zone",description:"Title for the user settings that we consider 'dangerous', like deleting an account."})),o()(w.Z,{isLarge:!0,isRed:!0,onClick:this.handleDeleteAccountClick},void 0,o()(m.FormattedMessage,{id:"profileSettings.dangerousSettings.deleteAccountButton.label",defaultMessage:"Delete my account"}))]}}const C=k},86125:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(77094),o=s.n(i),r=s(67294),n=s(5366),a=s(31689),l=s(26524);function d(e){const t=(0,a.u)();return r.createElement(l.Z,e,"membership_admin"===e.role?o()(n.FormattedMessage,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin",description:"Label that shows on a user that is a workspace membership admin."}):o()(n.FormattedMessage,t?{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner",description:"Label that shows on a user that is a workspace owner."}:{id:"spacePermissionsSettings.user.admin",defaultMessage:"Admin",description:"Label that shows on a user that is a workspace admin."}))}},79092:(e,t,s)=>{s.d(t,{Z:()=>m});var i=s(77094),o=s.n(i),r=s(77422),n=s.n(r),a=(s(33948),s(67294),s(83355)),l=s(5366),d=s(37181),u=s(27832),c=s(55422);class p extends a.Z{constructor(){super(...arguments),n()(this,"handleStartOfWeekToggle",(()=>{1===this.getStartDayOfWeek()?d.rx(this.environment):d.Zf(this.environment)}))}renderComponent(){const{device:e}=this.environment;return o()(c.Z,{isMobile:e.isMobile,title:o()(l.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:o()(l.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===this.getStartDayOfWeek(),onToggle:this.handleStartOfWeekToggle})}getStartDayOfWeek(){const{currentUserSettingsStore:e}=u.default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}}const m=p},21752:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(77094),o=s.n(i),r=s(67294),n=s.n(r),a=s(19889),l=s(5366),d=s(86125),u=s(99224),c=s(46951),p=s(52738);function m(){return n().createElement(n().Fragment,null,o()(u.B,{})," • ")}const g=function(e){const t=(0,l.useIntl)(),{userValue:s,containerStyle:i,id:r,spaceRole:n}=e,u="guest"===n,g="admin"===n||"membership_admin"===n;return o()("div",{style:{display:"flex",alignItems:"center",maxWidth:300,...i}},void 0,o()(p.Z,{userValue:s,size:28}),o()("div",{style:{minWidth:0,marginLeft:6,marginRight:6}},void 0,o()("div",{id:r,style:{display:"flex",gap:4}},void 0,o()(c.Z,{className:"notranslate"},void 0,(0,a.Nz)(t,s)),g&&o()(d.Z,{role:n})),o()(c.Z,{isSmall:!0},void 0,u&&o()(m,{}),null==s?void 0:s.email)))}},79603:(e,t,s)=>{s.d(t,{mS:()=>U,Ub:()=>V,Pp:()=>N});var i=s(97464),o=s.n(i),r=s(77094),n=s.n(r),a=(s(33948),s(96486)),l=s.n(a),d=s(67294),u=s.n(d),c=s(480),p=s(28350),m=s(24405),g=s(8848),h=s(33728),b=s(12174),f=s(53397),v=s(5366),S=s(57400),y=s(95477),w=s(27832),M=s(95155),k=s(7339),C=s(48762),Z=s(46167),P=s(69972),T=s(62727),I=s(68932),R=s(71202),x=s(25584),F=s(47966),B=s(26524),A=s(42001),L=s(83071),E=s(27386),D=s(23189),G=s(40235),q=s(46951);const O="janus";function U(){var e;if("local"===y.Z.env)return!0;const t=null===(e=w.default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return"makenotion.com"===(0,h.Gd)(null!=t?t:"")||"on"===M.default.getGroup(O)}function _(e){return[...M.default.getExperiments(),...e?b.l4.map((e=>({experimentId:e,experimentVersion:1,group:M.default.getEligibleGroup({experimentId:e,defaultGroup:b.nb}),groups:[...(0,b._n)(e),"control",b.nb],fromStatsig:!0,statsigOption:"EXPERIMENT"}))):[],...e?b.b2.map((e=>({experimentId:e,experimentVersion:1,group:M.default.checkGate(e).toString(),groups:["true","false"],fromStatsig:!0,statsigOption:"FEATUREGATE"}))):[]]}function V(e){const t=(0,c.O7)(),[s,i]=(0,d.useState)(""),[r,a]=(0,d.useState)(void 0),h="production"!==y.Z.env&&M.default.isStatsigEnabled(),w=(0,p.VK)((()=>_(h).filter((e=>e.experimentId!==O&&(!s||0===s.length||e.experimentId.includes(s)))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[s,h]),{device:P}=t,E=P.isMobile,U=(0,m.y)((e=>({containerStyle:{width:"100%"},headerContainerStyle:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap"},headerLabelStyle:{marginTop:2,marginBottom:12,padding:2,flex:1},filterContainerStyle:{paddingBottom:"12px"},resetButtonContainerStyle:{paddingBottom:"12px"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end"},experimentGroupButtonStyle:{maxWidth:E?"100px":void 0,overflowX:"hidden",justifyContent:"left"},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonCheckContainerStyle:{width:E?16:14}})),[E]);return n()("div",{style:U.containerStyle},void 0,n()(D.Z,{large:!0,style:{fontSize:16,fontWeight:500}},void 0,"Experiments"),n()("div",{style:U.headerContainerStyle},void 0,n()(q.Z,{isSmall:!0,isMultiline:!0,style:U.headerLabelStyle},void 0,"Toggle experiments for yourself. This only works for experiments that are based on userId or deviceId. For debugging statsig experiments in production, or statsig experiments on the server-side, you should go to console.statsig.com."),n()("div",{style:U.resetButtonContainerStyle},void 0,n()(F.Z,{isSmall:!0,onClick:()=>{a({reset:!0}),k.Z.removeAllLocalOverrides(),(0,S.Of)(t).then((()=>{a(void 0)}))}},void 0,null!=r&&r.reset?n()(I.Z,{}):"Reset to defaults"))),n()("div",{style:U.filterContainerStyle},void 0,n()(T.Z,{placeholder:"Filter by experiment ID or Feature Gate Name...",value:s,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{i(e.target.value)}})),n()(G.Z,{columns:[{key:"name",header:"Experiment ID or Feature Gate Name",style:U.tableExperimentIDHeaderStyle},{key:"group",header:"Group",style:U.tableExperimentGroupHeaderStyle}],rows:w.map((e=>{const s=e.group,i=h&&"fromStatsig"in e&&e.fromStatsig,d=i&&"FEATUREGATE"===e.statsigOption,c=i&&"EXPERIMENT"===e.statsigOption;return{key:i?"statsig:".concat(e.experimentId):e.experimentId,columns:[n()("div",{style:{display:"flex"}},void 0,n()("span",{style:{marginRight:5}},void 0,e.experimentId),i&&n()(B.Z,{},void 0,"Statsig ".concat(e.statsigOption))),n()("div",{style:U.experimentGroupContainerStyle},void 0,n()(Z.Z,{popupType:P.isMobile?Z.Z.PopupType.SlideUp:Z.Z.PopupType.Popup,renderOrigin:t=>u().createElement(A.Z,o()({},t,{key:e.experimentId,style:U.experimentGroupButtonStyle}),null!=s?s:"unknown",f.Z.chevronDown(U.experimentGroupButtonChevronStyle)),render:p=>{let m;m=P.isMobile?{menuType:R.Z.MenuType.Modal,title:e.experimentId,right:n()(v.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:p.close}:{menuType:R.Z.MenuType.Popup,width:250};const h=e.groups.map((m=>({key:m,action:s=>{let i;i=c?new Promise((t=>{k.Z.updateLocalOverrideConfig(e.experimentId,m),t(m)})):d?new Promise((t=>{k.Z.updateLocalOverrideGate(e.experimentId,m),t(m)})):(0,S.BX)(t,e.experimentId,m),a({experimentId:e.experimentId,group:m}),i.then((()=>{a(void 0),l().delay((()=>{p.close()}),1e3)}))},render:(t,a)=>{const l=i&&m===b.nb;return u().createElement(C.Z,o()({},t,{title:m,right:r&&r.experimentId===e.experimentId&&r.group===m?n()("div",{style:U.experimentGroupButtonCheckContainerStyle},void 0,n()(I.Z,{})):m!==s||r?void 0:n()("div",{style:U.experimentGroupButtonCheckContainerStyle},void 0,f.Z.check()),disabled:l,style:{...l&&{color:g.ZP.mediumTextColor}}}))}})));return u().createElement(R.Z,m,n()(x.Z,{type:x.Z.Type.Vertical,initialFocus:void 0,sections:[{key:e.experimentId,render:e=>u().createElement(L.Z,e),items:h}]}))}}))]}}))}))}function N(e){const t=(0,m.y)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return n()("div",{},void 0,n()(D.Z,{},void 0,"Experiments"),n()(q.Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle},void 0,"Locally toggle experiments."),n()(Z.Z,{popupType:Z.Z.PopupType.SlideUp,renderOrigin:e=>u().createElement(F.Z,o()({},e,{isLarge:!0,style:t.PlainButtonStyle}),"View Experiments"),render:e=>{const t={menuType:R.Z.MenuType.Modal,whiteBackground:!0,title:"Experiments",right:n()(v.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return n()(P.Z,{capture:!0,allowEsc:!0,render:()=>u().createElement(R.Z,t,n()(E.Z,{disableScroller:!0},void 0,n()(V,{})))})}}))}},77701:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(77094),o=s.n(i),r=(s(67294),s(24405)),n=s(53397);function a(e){const t=function(e){const{size:t,style:s}=e;return(0,r.y)((e=>({icon:{width:.6*t,height:.6*t,fill:e.mediumTextColor},iconContainer:{width:t,height:t,borderRadius:"100%",background:e.regularDividerColor,display:"flex",alignItems:"center",justifyContent:"center",...s}})),[t,s])}(e),s=n.Z.membersFilled(t.icon);return o()("div",{style:t.iconContainer},void 0,s)}},99224:(e,t,s)=>{s.d(t,{B:()=>u});var i=s(77094),o=s.n(i),r=s(67294),n=s.n(r),a=s(53397),l=s(26825),d=s(5366);function u(e){return n().createElement(n().Fragment,null,a.Z.globe2({width:14,fill:"#CF8807",display:"inline",verticalAlign:"middle"}),o()("span",{style:{color:"#CF8807",fontWeight:500}},void 0,n().createElement(d.FormattedMessage,l.mq.guestLabel)))}},64131:(e,t,s)=>{s.d(t,{Z:()=>D});var i=s(77094),o=s.n(i),r=s(97464),n=s.n(r),a=s(77422),l=s.n(a),d=(s(33948),s(67294)),u=s.n(d),c=s(83355),p=s(8848),m=s(53397),g=s(70203),h=s(82990),b=s(5366),f=s(50906),v=s(98724),S=s(98742),y=s(89086),w=s(52689),M=s(63334),k=s(24666),C=s(41216),Z=s(14947),P=s(46167),T=s(52377),I=s(94610),R=s(71202),x=s(25584),F=s(15282),B=s(83071),A=s(37235);const L=u().Fragment;class E extends c.Z{constructor(){super(...arguments),l()(this,"storeTypes",{ignoreSelectionAreaStore:M.Z}),l()(this,"renderHighlightColorMenuItem",((e,t,s,i)=>({key:t||e,action:()=>{s(),this.menuItemAction(e),i.close()},render:s=>u().createElement(C.Z,n()({},s,{color:e,overrideDisplayName:t}))}))),l()(this,"handleToggleHighlightAnnotation",(()=>{v.aS({environment:this.environment,annotation:["h",w.Z.state.color]}),f.trackRichTextMenuClick(this.environment,{action:"h",color:w.Z.state.color})})),l()(this,"handleButtonPopupClick",(e=>{f.trackRichTextMenuClick(this.environment,{action:"h"})})),l()(this,"handleClose",(()=>{k.default.emit()})),l()(this,"menuItemAction",(e=>{v.mX({environment:this.environment,annotationType:"h"}),"default"!==e&&(w.Z.setHighlightColor(e),this.handleToggleHighlightAnnotation())}))}renderComponent(){const{device:e}=this.environment,{intl:t}=this.props;return o()(P.Z,{popupType:e.isMobile?P.Z.PopupType.SlideUp:P.Z.PopupType.Popup,originGap:4,onClose:this.handleClose,onClick:this.handleButtonPopupClick,renderOrigin:t=>o()(A.Z,{renderTooltip:()=>o()(L,{},void 0,o()("div",{},void 0,o()(b.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})),o()("div",{},void 0,o()(I.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleHighlight"}))),render:s=>u().createElement(Z.Z,n()({style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",...this.props.style},disabled:this.props.disabled,disabledFeedback:this.props.disabled},(0,S.Z)(t,s)),o()("div",{style:this.getColorIconStyle()},void 0,e.isMobile?o()(b.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"}):"A"),m.Z.chevronDown({width:10,marginLeft:e.isMobile?4:3,fill:"dark"===this.theme.mode?p.ZP.white:this.theme.lightIconColor}))}),render:s=>{let i;return i=e.isMobile?{menuType:R.Z.MenuType.Modal,title:o()(b.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:o()(F.CancelMenuText,{}),onClickRight:()=>{s.close()}}:{menuType:R.Z.MenuType.Popup},u().createElement(R.Z,i,o()(T.Z,{capture:e.isMobile,store:this.stores.ignoreSelectionAreaStore,ignoreBlockSelection:!1,restoreSelection:!0,focusOffscreenInput:!1,render:e=>{const i=p.CY.map((t=>this.renderHighlightColorMenuItem(t,void 0,e,s))),r=[this.renderHighlightColorMenuItem("default",t.formatMessage({defaultMessage:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),e,s),...p._K.map((t=>this.renderHighlightColorMenuItem(t,void 0,e,s)))],a=w.Z.state.color;return o()(x.Z,{type:x.Z.Type.Vertical,sections:[{key:0,items:[{key:0,action:()=>{e(),this.menuItemAction(a),s.close()},render:e=>u().createElement(C.Z,n()({},e,{color:a,shortcuts:["toggleHighlight"]}))}],render:e=>u().createElement(B.Z,n()({},e,{title:o()(b.FormattedMessage,{defaultMessage:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0}))},{key:1,items:i,render:e=>u().createElement(B.Z,n()({},e,{title:o()(b.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0}))},{key:2,items:r,render:e=>u().createElement(B.Z,n()({},e,{title:o()(b.FormattedMessage,{defaultMessage:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0}))}],initialFocus:void 0})}}))}})}getTextSelectionColor(){const e=(0,y.Ld)("h");return e?g.zI(e):"default"}getColorIconStyle(){const{device:e}=this.environment;return{display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2,...!e.isMobile&&{width:18,fontWeight:h.Z.fontWeight.medium,marginBottom:2},...(0,p.A_)(this.getTextSelectionColor(),this.theme)}}}const D=(0,b.injectIntl)(E)},82945:(e,t,s)=>{s.d(t,{Z:()=>w});var i=s(97464),o=s.n(i),r=s(77094),n=s.n(r),a=s(77422),l=s.n(a),d=(s(33948),s(67294)),u=s.n(d),c=s(83355),p=s(53397),m=s(5366),g=s(50906),h=s(7476),b=s(24666),f=s(14947),v=s(94610),S=s(37235);class y extends c.Z{constructor(){super(...arguments),l()(this,"handleClick",(e=>{const t=b.default.state;"empty"!==t.mode&&h.WD({environment:this.environment,blockStore:this.props.blockStore,multiSelection:t.multiSelection}),g.trackRichTextMenuClick(this.environment,{action:"comment"})}))}renderComponent(){const{device:e}=this.environment,t=e.isMobile;return n()(S.Z,{renderTooltip:()=>n()(d.Fragment,{},void 0,n()("div",{},void 0,n()(m.FormattedMessage,{defaultMessage:"Comment on selected text",id:"inlineCommentButton.tooltip"})),n()("div",{},void 0,n()(v.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"comment"}))),render:e=>u().createElement(f.Z,o()({style:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap",...this.props.style},disabled:this.props.disabled,disabledFeedback:this.props.disabled,onClick:this.handleClick},e),p.Z.speechBubbleThin({width:t?18:16,height:t?18:16,marginTop:t?0:1,marginRight:4}),!t&&n()(m.FormattedMessage,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"}))})}}const w=y},93007:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(77094),o=s.n(i),r=(s(33948),s(67294),s(83355));function n(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const a=["ar","az","he","fa","ur"];class l extends r.Z{renderComponent(){return this.renderTranslatedText()}renderTranslatedText(){const{translations:e}=this.props,t=n();for(const s of t){const t=e[s];if(t)return o()("div",{style:this.getTextStyle(s)},void 0,t)}}getTextStyle(e){return a.includes(e)?{direction:"rtl",...this.props.style}:{...this.props.style}}}const d=l},52796:(e,t,s)=>{s.d(t,{Z:()=>J});var i=s(77094),o=s.n(i),r=(s(33948),s(67294)),n=s.n(r),a=s(480),l=s(28350),d=s(76725),u=s(97880),c=s(5366),p=s(50906),m=s(9953),g=s(35822),h=s(93561),b=s(37181),f=s(59488),v=s(33665),S=s(38755),y=s(21115),w=s(27832),M=s(88632),k=s(95155),C=s(41952),Z=s(72087),P=s(78291),T=s(97832),I=s(79092),R=s(97464),x=s.n(R),F=s(24405),B=s(86658),A=s(53397),L=s(92108),E=s(12955),D=s(10182),G=s(42001),q=s(23189),O=s(46951);function U(){const e=(0,F.F)();return o()(D.Z,{hasDismissButton:!1,renderOrigin:t=>n().createElement(G.Z,x()({style:{paddingLeft:8,paddingRight:8,height:32}},t),o()(c.FormattedMessage,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),A.Z.chevronDown({width:10,marginLeft:4,fill:e.lightIconColor}))})}const _=function(){const e=(0,a.O7)();return(0,E.canSetCookie)(e)&&(0,E.canShowCookieUi)(e)?o()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},void 0,o()("div",{style:{flex:1,marginRight:10}},void 0,o()(q.Z,{},void 0,n().createElement(c.FormattedMessage,B.ze.cookieSettingsLabel)),o()(O.Z,{isSmall:!0,isMultiline:!0},void 0,(0,B.Fd)(L.Tz,"settings"))),o()(U,{})):null};var V=s(29368),N=s(79603),z=s(74523),W=s(68932),K=s(1548),j=s(27386),H=s(55422),Q=s(42982),Y=s(30045);function J(e){let{isMobile:t}=e;const{isElectron:s,isPhone:i,isIOS:r}=(0,a.Fy)(),n=(0,a.O7)(),d=(0,l.VK)((()=>M.Z.state.online),[]),p=(0,l.VK)((()=>{var e,i;const r=(null===(e=w.default.state.currentSpaceViewStore)||void 0===e||null===(i=e.getKeyStore("notify_email"))||void 0===i?void 0:i.getValue())||!1;return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i}=e;return[{key:"notify_mobile",renderSettingsItem:()=>o()($,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>o()($,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>o()($,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>o()($,{target:"notify_email_always"})}:void 0].filter(u.$K)}({isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:r})}),[t,s]),m=(0,l.VK)((()=>t?function(e){let{isPhone:t,isIOS:s}=e;const{data:i}=P.default.state,r=s&&y.wY(i),n="on"===k.default.getGroup("user-data-consent"),a=(0,N.mS)(),l="on"===k.default.getGroup("mobile-delete-account"),d=!(t&&(0,f.Y)("supportsNativeHome")),c="on"===k.default.getGroup("block-attribution");return[{key:"password",renderSettingsItem:()=>o()(se,{})},{key:"cookies",renderSettingsItem:()=>o()(_,{})},{key:"appearance",renderSettingsItem:()=>o()(ie,{isMobile:!0})},d?{key:"page-on-app-start",renderSettingsItem:()=>o()(re,{isMobile:!0})}:void 0,c?{key:"block-attribution",renderSettingsItem:()=>o()(oe,{isMobile:!0})}:void 0,r?{key:"subscription",renderSettingsItem:()=>o()(Q.Z,{})}:void 0,n?{key:"user-consent",renderSettingsItem:()=>o()(Y.Z,{})}:void 0,{key:"calendar",renderSettingsItem:()=>o()(I.Z,{})},a?{key:"experiments",renderSettingsItem:()=>o()(N.Pp,{})}:void 0,l?{key:"deleteAccount",renderSettingsItem:()=>o()(T.Z,{})}:void 0].filter(u.$K)}({isPhone:i,isIOS:r}):[{key:"appearance",renderSettingsItem:()=>o()(ie,{isMobile:!1})},{key:"page-on-app-start",renderSettingsItem:()=>o()(re,{isMobile:!1})},{key:"cookies",renderSettingsItem:()=>o()(_,{})},"on"===k.default.getGroup("block-attribution")?{key:"block-attribution",renderSettingsItem:()=>o()(oe,{isMobile:!1})}:void 0].filter(u.$K)),[t,i,r]),{paddingBottomCSS:g}=(0,l.VK)((()=>n.WindowSizeStore.state),[n]);return d?o()(j.Z,{disableScroller:t},void 0,o()(q.Z,{large:!t,divider:"full"},void 0,o()(c.FormattedMessage,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})),o()("div",{className:"notification-settings"},void 0,o()(X,{isMobile:t,items:p})),o()(V.Z,{size:48,isHidden:!0}),o()(q.Z,{large:!t,divider:"full"},void 0,o()(c.FormattedMessage,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})),o()("div",{className:"personal-settings"},void 0,o()(X,{isMobile:t,items:m})),o()(V.Z,{size:48,isHidden:!1}),o()("div",{style:{marginTop:4,marginBottom:t?g:void 0}},void 0,o()(z.Z,{title:o()(c.FormattedMessage,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,v.UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"}))):o()(j.Z,{},void 0,o()(O.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,o()(c.FormattedMessage,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})))}function X(e){const{isMobile:t,items:s}=e;return n().createElement(n().Fragment,null,(0,d.Z)(s.map((e=>{let{key:t,renderSettingsItem:s}=e;return o()(n().Fragment,{},t,s())})),(e=>o()(V.Z,{size:t?32:18,isHidden:!t},e))))}function $(e){const{target:t}=e,s=(0,a.O7)(),i=(0,l.VK)((()=>w.default.state.currentSpaceViewStore),[]),n=(0,l.VK)((()=>{var e;return(null==i||null===(e=i.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1}),[i,t]),d=(0,r.useCallback)((()=>{if(i){const e=!n;h.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:s=>{m.sW({store:i,data:{[t]:e},transaction:s})}}),p.trackSetPushNotification(s,{is_on:e,target:t})}}),[s,i,n,t]);return o()(H.Z,{isMobile:!0,title:ee(t),caption:te(t),type:"toggle",isOn:n,onToggle:d})}function ee(e){return"notify_mobile"===e?o()(c.FormattedMessage,{id:"notificationSettings.mobilePushNotificationSettings.title",defaultMessage:"Mobile push notifications"}):"notify_desktop"===e?o()(c.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"}):"notify_email"===e?o()(c.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.title",defaultMessage:"Email notifications"}):"notify_email_always"===e?o()(c.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"}):void(0,u.t1)(e)}function te(e){return"notify_mobile"===e?o()(c.FormattedMessage,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app."}):"notify_desktop"===e?o()(c.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately via your desktop app."}):"notify_email"===e?o()(c.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.description",defaultMessage:"Receive email updates on mentions, comments, and edit digests for all the pages you have followed."}):"notify_email_always"===e?o()(c.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.description",defaultMessage:"Receive updates by email, even when you’re active on the app."}):void(0,u.t1)(e)}function se(){const[e,,t]=(0,l.oR)(void 0,Z.Z),s=(0,l.VK)((()=>{const{data:e}=P.default.state;return y.wl(e)}),[]);return e.loading?o()(W.Z,{}):o()(K.Z,{requestStore:t,isEducationPlan:s})}function ie(e){let{isMobile:t}=e;const s=(0,a.O7)(),[i]=(0,l.oR)(s.ThemeStore),[r,d]=n().useState(g.MH(s,i.mode));return o()(H.Z,{isMobile:t,title:o()(c.FormattedMessage,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:o()(c.FormattedMessage,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:r,options:[{key:"system",label:o()(c.FormattedMessage,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:o()(c.FormattedMessage,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:o()(c.FormattedMessage,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{g.rz(s,e),d(e)}})}function oe(e){let{isMobile:t}=e;const s=(0,a.O7)(),{currentUserSettingsStore:i}=(0,l.VK)((()=>w.default.state),[]),n=(0,l.VK)((()=>{var e,t;return null===(e=null==i||null===(t=i.getSettings())||void 0===t?void 0:t.show_block_attribution)||void 0===e||e}),[i]),d=(0,r.useCallback)((()=>{i&&h.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:e=>{(0,b.d2)({userSettingsStore:i,data:{show_block_attribution:!n},transaction:e})}})}),[i,n,s]);return o()(H.Z,{isMobile:t,title:o()(c.FormattedMessage,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:o()(c.FormattedMessage,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:n,onToggle:d})}function re(e){let{isMobile:t}=e;const s=(0,a.O7)(),i=(0,l.VK)((()=>w.default.state.currentSpaceViewStore),[]),r=(0,l.VK)((()=>S.getOnAppStartPreference(s,i)),[s,i]);return o()(H.Z,{isMobile:t,title:o()(c.FormattedMessage,{id:"pageOnAppStoreSetting.title",defaultMessage:"Open on start"}),caption:o()(c.FormattedMessage,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),type:"dropdown",currentOption:r,options:[{key:"last_visited_page",label:o()(c.FormattedMessage,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"})},{key:"first_page",label:o()(c.FormattedMessage,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"})}],onSelectOption:e=>{if(i){const t=(0,C._J)(i,i.pointer,["settings"]);h.createAndCommit({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,perform:s=>{m.sW({store:t,data:{on_app_start:e},transaction:s})}})}}})}},1548:(e,t,s)=>{s.d(t,{Z:()=>F});var i=s(77094),o=s.n(i),r=s(77422),n=s.n(r),a=(s(33948),s(67294)),l=s(83355),d=s(8848),u=s(96068),c=s(5366),p=s(50906),m=s(54642),g=s(47307),h=s(43250),b=s(33954),f=s(27832),v=s(69503),S=s(12318),y=s(72693),w=s(69972),M=s(62727),k=s(15102),C=s(47966),Z=s(7765),P=s(23189),T=s(13490),I=s(33058),R=s(46951);class x extends l.Z{constructor(){super(...arguments),n()(this,"storeTypes",{hasPasswordStore:S.default.of(!1),emailStore:S.default.of("")}),n()(this,"handleChangePasswordClick",(()=>{p.trackChangePasswordClick(this.environment),v.Z.setState({open:!0,setNewPassword:!0,password:"",repeatPassword:""})})),n()(this,"handleOldPasswordChange",(e=>{(v.Z.isSetNewPasswordModal()||v.Z.isRemovePasswordModal())&&v.Z.setState({...v.Z.state,oldPassword:e.target.value,alert:void 0})})),n()(this,"handleClearOldPassword",(()=>{(v.Z.isSetNewPasswordModal()||v.Z.isRemovePasswordModal())&&v.Z.setState({...v.Z.state,oldPassword:"",alert:void 0})})),n()(this,"handlePasswordChange",(e=>{v.Z.isSetNewPasswordModal()&&v.Z.setState({...v.Z.state,password:e.target.value,alert:void 0})})),n()(this,"handleCancelChangePassword",(()=>{const{onCancel:e}=v.Z.state;v.Z.reset(),e&&e()})),n()(this,"handleClearPassword",(()=>{v.Z.isSetNewPasswordModal()&&v.Z.setState({...v.Z.state,password:"",repeatPassword:"",alert:void 0})})),n()(this,"handleRepeatPasswordChange",(e=>{v.Z.isSetNewPasswordModal()&&v.Z.setState({...v.Z.state,repeatPassword:e.target.value,alert:void 0})})),n()(this,"handleClearRepeatPassword",(()=>{v.Z.isSetNewPasswordModal()&&v.Z.setState({...v.Z.state,repeatPassword:"",alert:void 0})})),n()(this,"handlePasswordBlur",(()=>{if(v.Z.isSetNewPasswordModal()){const{password:e,repeatPassword:t}=v.Z.state;e&&t&&e!==t&&v.Z.setState({...v.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}})),n()(this,"handleSubmit",(async()=>{if(!v.Z.isSetNewPasswordModal())return;const{oldPassword:e,password:t,repeatPassword:s}=v.Z.state,i=this.stores.hasPasswordStore.get(),{intl:o}=this.props;let r;if(i&&!e)r=o.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(t){const e=(0,u.I)(t);e.success?s?t!==s&&(r=o.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):r=o.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):r=this.getPasswordErrorMessage(e.reason)}else r=o.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(r)return void v.Z.setState({...v.Z.state,alert:r});const n=await m.setPassword(this.environment,{oldPassword:e,newPassword:t});if("success"===n.type)this.props.requestStore.refresh(),void 0===e?this.saveNewPasswordSuccess():this.changePasswordSuccess();else{const e=(0,b.wf)(this.props.intl,n);v.Z.setState({...v.Z.state,alert:e})}})),n()(this,"handleShowRemovePasswordModalClick",(()=>{v.Z.setState({open:!0,removePassword:!0,oldPassword:""})})),n()(this,"handleRemovePasswordClick",(async()=>{if(!v.Z.isRemovePasswordModal())return;const{oldPassword:e}=v.Z.state;if(p.trackRemovePasswordClick(this.environment),!e)return void v.Z.setState({...v.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password.",description:"We require users to enter their password in a text box before they can delete it. This error message appears if the user attempts to delete their password but hasn't entered it into the text box."})});const t=await m.setPassword(this.environment,{oldPassword:e,clearPassword:!0});if("success"===t.type)this.props.requestStore.refresh(),this.removePasswordSuccess();else{const e=(0,b.wf)(this.props.intl,t);v.Z.setState({...v.Z.state,alert:e||this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}})),n()(this,"defaultErrorMessage",this.props.intl.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."}))}willMount(e){super.willMount(e);const{currentUserStore:t}=f.default.state;if(t){const e=t.getValue();e&&this.stores.emailStore.set(e.email)}}renderComponent(){const e=this.stores.emailStore.get();if(!e)return;const{requestStore:t}=this.props;return o()("div",{style:this.getSettingsOptionStyle()},void 0,o()(P.Z,{smallMarginBottom:!0},void 0,o()(c.FormattedMessage,{id:"passwordSettings.title",defaultMessage:"Password"})),o()(Z.Z,{request:{},requestStore:t,performRequest:async()=>{const t=await m.getLoginOptions(this.environment,{email:e});if("success"===t.type){const e=t.data;return{samlEnforced:"required"===e.samlSignIn,hasPassword:"required"!==e.samlSignIn&&e.hasAccount&&e.passwordSignIn}}throw t.error},render:(e,t)=>{if(e)return x.renderLabel(o()(c.FormattedMessage,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}));if(t){const{samlEnforced:e,hasPassword:s}=t;return e?x.renderLabel(o()(c.FormattedMessage,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider.",description:"Message letting users know that their password is managed through a 3rd-party provider, which is why they can't set their password on Notion's password settings page."})):(this.stores.hasPasswordStore.set(Boolean(s)),this.renderPasswordActions())}}}))}renderPasswordActions(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return o()(a.Fragment,{},void 0,x.renderLabel(o()(c.FormattedMessage,{id:"passwordSettings.passwordSetInstructions",defaultMessage:"You can set a permanent password if you don't want to use temporary login codes."})),e&&x.renderLabel(this.renderEducationPlanInfo()),o()("div",{style:{display:"flex",alignItems:"center"}},void 0,o()(C.Z,{isLarge:!0,onClick:this.handleChangePasswordClick,style:{marginTop:12,marginBottom:4}},void 0,o()(c.FormattedMessage,t?{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}:{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})),this.canRemovePassword()&&o()(I.Z,{onClick:this.handleShowRemovePasswordModalClick,style:{marginLeft:5,marginTop:12,marginBottom:4}},void 0,o()(c.FormattedMessage,{id:"passwordSettings.removePasswordButton.label",defaultMessage:"Remove password"}))),this.renderPasswordModal())}static renderLabel(e){return o()(R.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,e)}renderPasswordModal(){const{device:e}=this.environment,{open:t}=v.Z.state;return o()(k.Z,{open:t,onDismiss:this.handleCancelChangePassword,innerStyle:{width:e.isPhone?"90%":460,minHeight:270,padding:24},className:h.BK,preventHideChildrenWhileOpening:!0,render:()=>o()(w.Z,{capture:!0,allowEsc:!0,render:()=>o()(a.Fragment,{},void 0,this.renderSaveNewPassword(),this.renderRemovePassword())})})}renderSaveNewPassword(){const{isEducationPlan:e}=this.props;if(!v.Z.isSetNewPasswordModal())return;const{password:t,repeatPassword:s,oldPassword:i,alert:r}=v.Z.state,n=this.stores.hasPasswordStore.get(),l=this.stores.emailStore.get();return o()(a.Fragment,{},void 0,o()(M.Z,{style:{display:"none"},type:"text",value:l,autoComplete:"username",disabled:!0}),n&&o()(a.Fragment,{},void 0,o()(T.Z,{},void 0,o()(c.FormattedMessage,{id:"passwordSettings.changePasswordModal.oldPasswordInput.label",defaultMessage:"Old Password"})),o()(M.Z,{type:"password",value:i,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.oldPasswordInput.placeholder",defaultMessage:"Enter old password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"})),n?o()(T.Z,{hasMarginTop:!0},void 0,o()(c.FormattedMessage,{id:"passwordSettings.newPasswordInput.label",defaultMessage:"New password"})):o()(T.Z,{},void 0,o()(c.FormattedMessage,{id:"passwordSettings.passwordInput.label",defaultMessage:"Password"})),o()(M.Z,{type:"password",value:t,onChange:this.handlePasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.newPasswordInput.placeholder",defaultMessage:"Enter new password..."}),style:{padding:"4px 8px"},focusInitial:!n,onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),o()(T.Z,{hasMarginTop:!0},void 0,o()(c.FormattedMessage,{id:"passwordSettings.repeatPasswordInput.label",defaultMessage:"Repeat password"})),o()(M.Z,{type:"password",value:s,onChange:this.handleRepeatPasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearRepeatPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.repeatPasswordInput.placeholder",defaultMessage:"Repeat new password..."}),style:{padding:"4px 8px"},onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),o()(R.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},void 0,o()(c.FormattedMessage,{id:"passwordSettings.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."})),e&&o()(R.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},void 0,this.renderEducationPlanInfo()),this.renderAlert(r),o()(y.Z,{isLarge:!0,style:{marginTop:14},onClick:this.handleSubmit},void 0,o()(c.FormattedMessage,n?{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}:{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})))}renderRemovePassword(){const{isEducationPlan:e}=this.props;if(!v.Z.isRemovePasswordModal())return;const{oldPassword:t,alert:s}=v.Z.state;return o()(a.Fragment,{},void 0,o()("div",{style:{fontSize:14,width:"100%"}},void 0,o()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.text",defaultMessage:"You're about to remove your password. We'll email you temporary login codes to access Notion going forward.",description:"Message warning the user that they're about to delete their password, and telling them how to log in after their password has been deleted."}),e&&o()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.educationPlanWarning",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion.",description:"Warning for users on the Education Plan that if they lose access to their school email, they won't be able to log into Notion without a password."})),o()(T.Z,{hasMarginTop:!0},void 0,o()(c.FormattedMessage,{id:"passwordSettings.deletePasswordModal.passwordInput.label",defaultMessage:"Password"})),o()(M.Z,{type:"password",value:t,onChange:this.handleOldPasswordChange,onSubmit:this.handleRemovePasswordClick,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.passwordInput.placeholder",defaultMessage:"Enter your password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"}),this.renderAlert(s),o()(y.Z,{isLarge:!0,style:{marginTop:14},onClick:this.handleRemovePasswordClick},void 0,o()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.removePasswordButton.label",defaultMessage:"Remove password"})))}renderAlert(e){if(e)return o()(R.Z,{isMultiline:!0,style:{marginTop:8,color:d.ZP.red}},void 0,e)}renderEducationPlanInfo(){return o()(c.FormattedMessage,{id:"passwordSettings.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}saveNewPasswordSuccess(){const{intl:e,isEducationPlan:t}=this.props,{onSubmit:s}=v.Z.state;v.Z.reset();const i=t?e.formatMessage({id:"passwordSettings.setPasswordSuccess.educationMessage",defaultMessage:"Your password is all set! You'll be able to log in, even if you lose access to your school email address."}):e.formatMessage({id:"passwordSettings.setPasswordSuccess.message",defaultMessage:"Your password is all set!"});g.showMessage({message:i,onAccept:s})}changePasswordSuccess(){const{onSubmit:e}=v.Z.state;v.Z.reset(),g.showMessage({message:this.props.intl.formatMessage({id:"passwordSettings.changePasswordSuccess.message",defaultMessage:"Your new password has been saved."}),onAccept:e})}removePasswordSuccess(){v.Z.reset(),g.showMessage({message:this.props.intl.formatMessage({id:"passwordSettings.removePasswordSuccess.message",defaultMessage:"Your password has been removed."})})}getPasswordErrorMessage(e){const t=b.Ql[e.type];return t?this.props.intl.formatMessage(t):this.defaultErrorMessage}canRemovePassword(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return!e&&t}}const F=(0,c.injectIntl)(x)},40464:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(77094),o=s.n(i),r=s(97464),n=s.n(r),a=s(77422),l=s.n(a),d=(s(33948),s(67294)),u=s.n(d),c=s(83355),p=s(8848),m=s(50906),g=s(98724),h=s(89086),b=s(24666),f=s(14947),v=s(37235);class S extends c.Z{constructor(){super(...arguments),l()(this,"handleClick",(e=>{g.aS({environment:this.environment,annotation:[this.props.type]}),this.props.onClick&&this.props.onClick(),m.trackRichTextMenuClick(this.environment,{action:this.props.type})})),l()(this,"isDisabledStore",this.createComputedStore((()=>this.props.disabled||"editing"!==b.default.state.mode)))}renderComponent(){return o()(v.Z,{renderTooltip:()=>this.props.tooltipLabel,render:e=>u().createElement(f.Z,n()({style:this.getButtonStyle(),disabled:this.isDisabledStore.state,disabledFeedback:this.isDisabledStore.state,onClick:this.handleClick},e),this.props.children)})}getButtonStyle(){return{display:"flex",alignItems:"center",padding:"0 8px",color:(0,h.Ld)(this.props.type)?p.ZP.blue:this.theme.regularTextColor,...this.props.style}}}const y=S},32404:(e,t,s)=>{s.d(t,{Z:()=>M});var i=s(97464),o=s.n(i),r=s(77094),n=s.n(r),a=s(77422),l=s.n(a),d=(s(33948),s(67294)),u=s.n(d),c=s(83355),p=s(70203),m=s(5366),g=s(36280),h=s(89086),b=s(66949),f=s(24666),v=s(14947),S=s(94610),y=s(37235);class w extends c.Z{constructor(){super(...arguments),l()(this,"renderMenuTooltip",(()=>{const e=this.getThemeColors();return n()(u().Fragment,{},void 0,n()("div",{},void 0,n()(m.FormattedMessage,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Create equation"})),n()("div",{},void 0,n()(S.Z,{style:e.keyboardShortcut,name:"openEquationMenu"})))})),l()(this,"handleButtonPopupClick",(e=>{const{onClick:t}=this.props;g.qn({environment:this.environment,analyticsFrom:"rich_text_menu"}),t&&t(e)})),l()(this,"isSelected",(()=>(0,h.Ld)(p.GK.Equation))),l()(this,"isDisabled",(()=>{const{disabled:e}=this.props;if(e)return!0;if("editing"!==f.default.state.mode&&!b.Z.isOpen())return!0;const t={[p.GK.User]:p.GK.User,[p.GK.Page]:p.GK.Page,[p.GK.Comment]:p.GK.Comment,[p.GK.Bot]:p.GK.Bot,[p.GK.Date]:p.GK.Date,[p.GK.ExternalObjectInstance]:p.GK.ExternalObjectInstance,[p.GK.TemporaryPage]:p.GK.TemporaryPage,[p.GK.TemplateVariable]:p.GK.TemplateVariable};for(const s of Object.values(t))if((0,h.J6)(s))return!0;return!1})),l()(this,"styles",{equationButton:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8}})}renderComponent(){const{style:e,children:t}=this.props,s=this.getThemeColors(),i=this.isDisabled();return n()(y.Z,{renderTooltip:this.renderMenuTooltip,render:r=>u().createElement(v.Z,o()({style:{...this.styles.equationButton,...s.equationButton,...e},disabled:i,disabledFeedback:i,onClick:this.handleButtonPopupClick},r),t)})}getThemeColors(){return{equationButton:{color:this.isSelected()?this.theme.blueColor:this.theme.regularTextColor},keyboardShortcut:{color:this.theme.mediumInvertedTextColor}}}}const M=(0,m.injectIntl)(w)},73383:(e,t,s)=>{s.d(t,{Z:()=>k});var i=s(97464),o=s.n(i),r=s(77094),n=s.n(r),a=s(77422),l=s.n(a),d=(s(33948),s(67294)),u=s.n(d),c=s(83355),p=s(70203),m=s(5366),g=s(50906),h=s(45990),b=s(89086),f=s(23178),v=s(24666),S=s(14947),y=s(94610),w=s(37235);class M extends c.Z{constructor(){super(...arguments),l()(this,"handleButtonPopupClick",(()=>{h.dz({type:"focusOnly",focus:!0}),g.trackRichTextMenuClick(this.environment,{action:p.GK.Link})}))}renderComponent(){const e=(0,b.Ld)(p.GK.Link),t=this.isDisabled();return n()(w.Z,{renderTooltip:()=>n()(d.Fragment,{},void 0,n()("div",{},void 0,n()(m.FormattedMessage,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip",description:"Prompt for the user to add a URL to link to from the selected text."})),n()("div",{},void 0,n()(y.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"openLinkMenu"}))),render:s=>u().createElement(S.Z,o()({style:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8,...e&&{color:this.theme.blueColor},whiteSpace:"nowrap",...this.props.style},disabled:t,disabledFeedback:t},s,{onClick:this.handleButtonPopupClick}),this.props.children)})}isDisabled(){return!!this.props.disabled||("editing"!==v.default.state.mode&&!f.Z.state.open||!!((0,b.J6)(p.GK.User)||(0,b.J6)(p.GK.Bot)||(0,b.J6)(p.GK.Date)||(0,b.J6)(p.GK.Page)))}}const k=(0,m.injectIntl)(M)},27386:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(77094),o=s.n(i),r=(s(67294),s(83355)),n=s(20088),a=s(29368),l=s(11082),d=s(80172);class u extends r.Z{static renderDivider(){return o()(a.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:s,paddingLeftRight:i,bannerText:r}=this.props,a=()=>i||(e.isMobile?18:60),u=()=>e.isMobile?18:36;return this.props.disableScroller?o()("div",{style:{paddingLeft:a(),paddingRight:a()}},void 0,o()("div",{style:{paddingTop:u(),paddingBottom:u()}},void 0,t),s&&o()("div",{style:{paddingTop:16,paddingBottom:16,boxShadow:"0 -1px 0 ".concat(this.theme.regularDividerColor)}},void 0,s)):o()("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground}},void 0,r&&o()(n.Z,{type:n.$.Blue,isMobile:!1},void 0,r),o()(l.Z,{type:d.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:a(),paddingRight:a(),paddingTop:r?15:u(),paddingBottom:r?22:u()}},void 0,t),s&&o()("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:a(),paddingRight:a(),paddingTop:16,paddingBottom:16,boxShadow:"0 -1px 0 ".concat(this.theme.regularDividerColor)}},void 0,s))}}const c=u},55422:(e,t,s)=>{s.d(t,{Z:()=>T});var i=s(97464),o=s.n(i),r=s(77094),n=s.n(r),a=(s(41817),s(67294)),l=s.n(a),d=s(480),u=s(28350),c=s(24405),p=s(53397),m=s(97880),g=s(5366),h=s(93678),b=s(48762),f=s(46167),v=s(71202),S=s(86646),y=s(25584),w=s(42001),M=s(83071),k=s(23189),C=s(47714),Z=s(46951),P=s(61543);function T(e){const{title:t,caption:s,captionStyle:i,isMobile:o,upsellOptions:r,type:a}=e,p=(0,d.O7)(),{paddingLeftCSS:m,paddingRightCSS:g}=(0,u.VK)((()=>p.WindowSizeStore.state),[p]),b=(0,c.y)((()=>({container:{...o&&"dropdown"===a?{display:"flex",flexDirection:"column"}:{display:"flex",alignItems:"center",justifyContent:"space-between"},paddingLeft:o?m:void 0,paddingRight:o?g:void 0},description:{display:"flex",flexDirection:"column",marginRight:"10%"}})),[o,a,m,g]);return n()("div",{style:b.container,onClick:()=>{if(r&&r.shouldUpsell)return h.y(p,{from:r.analyticsName,for:r.subscriptionTier});"toggle"===e.type&&e.onToggle()}},void 0,n()("div",{style:b.description},void 0,n()(k.Z,{smallMarginBottom:!0},void 0,t,r&&r.shouldUpsell&&n()(P.Z,{subscriptionTier:r.subscriptionTier,analyticsName:r.analyticsName,onClick:()=>h.y(p,{from:r.analyticsName,for:r.subscriptionTier}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})),n()(Z.Z,{style:{...i},isSmall:!0,isMultiline:!0},void 0,s)),l().createElement(I,e))}function I(e){const{isAndroid:t}=(0,d.Fy)();return"toggle"===e.type?n()(C.Z,{on:e.isOn,isAndroid:t}):"dropdown"===e.type?l().createElement(R,e):void(0,m.t1)(e)}function R(e){var t;const{isMobile:s,title:i,upsellOptions:r,currentOption:a,options:d,info:u,onSelectOption:m,menuStyle:h}=e,k=null===(t=d.find((e=>{let{key:t}=e;return t===a})))||void 0===t?void 0:t.label,C=(0,c.y)((e=>({button:{marginTop:12,marginBottom:4,marginRight:s?"auto":void 0,paddingLeft:s?12:8,paddingRight:s?12:8,height:s?44:28,border:s?"1px solid ".concat(e.outlineButtonBorder):void 0},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[s]),Z=Boolean(r&&r.shouldUpsell)||e.disabled;return n()(f.Z,{popupType:s?f.Z.PopupType.SlideUp:f.Z.PopupType.Popup,placementToOrigin:f.Z.Placement.Right,renderOrigin:e=>l().createElement(w.Z,o()({},e,{isLarge:!0,style:{...C.button,opacity:Z?.4:1},disabled:Z}),k,p.Z.chevronDown(C.icon)),render:e=>{let t;t=s?{menuType:v.Z.MenuType.Modal,title:i,right:n()(g.FormattedMessage,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:v.Z.MenuType.Popup,width:250,...h};const r=[{key:"settings-item-section",render:e=>l().createElement(M.Z,e),items:d.map((t=>{let{key:i,label:r,caption:a}=t;return{key:i,action:()=>{m(i),e.close()},render:e=>l().createElement(b.Z,o()({},e,{title:r,caption:a,shouldWrapCaption:!0,right:k===r?n()("div",{style:{width:s?16:14}},void 0,p.Z.check()):void 0}))}}))}];if(u){const e=u.map((e=>{let{key:t,label:s}=e;return{key:t,action:()=>{},render:e=>l().createElement(S.Z,o()({},e,{shouldWrapCaption:!0,caption:s}))}}));r.push({key:"info-item-section",render:e=>l().createElement(M.Z,o()({},e,{topBorder:!0})),items:e})}return l().createElement(v.Z,t,n()(y.Z,{type:y.Z.Type.Vertical,sections:r,initialFocus:void 0}))}})}},93192:(e,t,s)=>{s.d(t,{Z:()=>Nt});var i=s(97464),o=s.n(i),r=s(77094),n=s.n(r),a=s(77422),l=s.n(a),d=(s(33948),s(96486)),u=s.n(d),c=s(67294),p=s.n(c),m=s(83355),g=s(31942),h=s(53397),b=s(27006),f=s(75246),v=s(19889),S=s(2438),y=s(97880),w=s(5366),M=s(48298),k=s(50906),C=s(54642),Z=s(25186),P=s(47307),T=s(92625),I=s(76464),R=s(29974),x=s(21325),F=s(93561),B=s(4708),A=s(67669),L=s(33665),E=s(38755),D=s(21115),G=s(23537),q=s(77907),O=s(27832),U=s(88632),_=s(95155),V=s(20454),N=s(72087),z=s(64404),W=s(92083),K=s(78291),j=s(98905),H=s(12318),Q=s(72693),Y=s(14947),J=s(21752),X=s(29368),$=s(21202),ee=s(26111),te=s(84210),se=s(61766),ie=s(80270),oe=s(46167),re=s(71202),ne=s(86646),ae=s(25584),le=s(16328),de=s(47966),ue=s(42001),ce=s(24042),pe=s(83071),me=s(37235);const ge=(0,w.defineMessages)({removingGuest:{id:"guestPagesPopup.removeGuest.updatingMessage",defaultMessage:"Updating…"},addingMember:{id:"guestPagesPopup.addMemberPermission.updatingMessage",defaultMessage:"Updating…"}});class he extends m.Z{constructor(){super(...arguments),l()(this,"storeTypes",{buttonPopupStore:se.Z}),l()(this,"renderPopup",(()=>{const{device:e}=this.environment,{store:t,guest:s}=this.props,i=t.canEditMembership(),r=s.guestPageIds.map((e=>{const s=ie.Z.createChildStore(t,{table:$.iU,id:e});return{key:e,render:e=>p().createElement(ce.Z,o()({},e,{store:s,placeholder:n()(w.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})})),action:()=>{const s=ie.Z.createChildStore(t,{table:$.iU,id:e}),i=(0,te.Z)({store:s,fullyQualified:!1});ee.navigate({environment:this.environment,url:i,metaClick:!0})}}}));let a,l;return a=e.isMobile?{menuType:re.Z.MenuType.ActionSheet}:{menuType:re.Z.MenuType.Popup,width:300},(0,D.qF)(this.environment)&&(l=n()(me.Z,{renderTooltip:()=>this.isSubscribed()?n()(w.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):n()(w.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>p().createElement(de.Z,o()({isLarge:!0,onClick:this.handleConvertToMemberClick},e),this.isSubscribed()?n()(w.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):n()(w.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"}))})),p().createElement(re.Z,a,i&&n()(ne.Z,{title:n()("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"}},void 0,l,n()(me.Z,{renderTooltip:()=>n()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>p().createElement(de.Z,o()({isLarge:!0,isRed:!0,style:{marginLeft:l?8:0},onClick:this.handleRemoveClick},e),n()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"}))}))}),i&&n()(le.Z,{title:n()(w.FormattedMessage,{id:"guestPagesPopup.guestAccessiblePagesCaption",defaultMessage:"This guest can access these pages"})}),n()(ae.Z,{type:ae.Z.Type.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>p().createElement(pe.Z,e),items:r}]}))})),l()(this,"handleRemoveClick",(()=>{P.showDialog({showCancel:!0,keepFocus:!1,message:n()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:n()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{const{guest:e,store:t}=this.props;this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),T.j({message:ge.removingGuest});"success"===(await C.removeUsersFromSpace(this.environment,{userIds:[e.userId],spaceId:t.id,removePagePermissions:!0,revokeUserTokens:!1})).type&&(await x.bi(this.environment),k.trackRemoveGuest(this.environment)),T.x()}}]})})),l()(this,"handleConvertToMemberClick",(async()=>{const{store:e,guest:t,isSubscribed:s}=this.props,{serverCommitResult:i}=F.createAndCommit({userAction:"GuestPagesPopup.handleConvertToMemberClick",environment:this.environment,perform:i=>{I.ep({environment:this.environment,store:e,permissionItems:[{type:"user_permission",role:s?"read_and_write":"editor",user_id:t.userId}],transaction:i,from:"convert_to_member"})}});this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),T.j({message:ge.addingMember});try{await i,await x.bi(this.environment),k.trackConvertGuestToMember(this.environment,{member_user_id:t.userId})}finally{T.x()}}))}renderComponent(){const{device:e}=this.environment,{buttonPopupStore:t}=this.stores,{store:s,guest:i}=this.props;return i.guestPageIds.map((e=>{ie.Z.createChildStore(s,{table:$.iU,id:e}).getValue()})),0===i.guestPageIds.length?n()(w.FormattedMessage,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"}):n()(oe.Z,{popupType:e.isMobile?oe.Z.PopupType.SlideUp:oe.Z.PopupType.Popup,renderOrigin:e=>p().createElement(ue.Z,e,n()(w.FormattedMessage,{id:"guestPagesButton.label",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:i.guestPageIds.length}}),h.Z.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),buttonPopupStore:t,render:this.renderPopup})}isSubscribed(){const{data:e}=K.default.state;return Boolean(e&&(0,D.YK)(e))}}const be=(0,w.injectIntl)(he);var fe=s(74523),ve=s(42402),Se=s(62727),ye=s(68932),we=s(7567),Me=s(7765),ke=(s(41817),s(480)),Ce=s(28350),Ze=s(24405),Pe=s(5851),Te=s(53680),Ie=s(47714),Re=s(46951),xe=s(93963),Fe=s(40235),Be=s(57269),Ae=s(32918),Le=s(52738);function Ee(e){var t;const{store:s,request:i,disabled:o}=e,{forActor:r,accessRequestStore:a}=i,l=(0,ke.O7)(),d=(0,Ze.y)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},email:{display:"flex",gap:4},requestMetadata:{minWidth:0,marginLeft:6,marginRight:6}})),[]),u=(0,w.useIntl)();if(!i||!i.forActor||!i.createdByActors)return null;const c=Ae.CQ(i.latestRequestTime,Ae.x7),m=(0,Be.ZV)({value:c,date_format:"relative",userTimeZone:Ae.x7,intl:u,allowRelativeDates:!0}),g={environment:l,store:s,accessRequestStore:a,forActor:r};return p().createElement(p().Fragment,null,n()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},void 0,n()("div",{style:{display:"flex",alignItems:"center"}},void 0,n()(Le.Z,{userValue:i.forActor,size:28}),n()("div",{style:d.requestMetadata},void 0,n()("div",{style:d.email},void 0,n()(Re.Z,{className:"notranslate"},void 0,i.forActor.email)),n()(Re.Z,{isSmall:!0},void 0,1===i.createdByActors.length&&n()(w.FormattedMessage,{defaultMessage:"From {actorName}",id:"spaceSettingsRequests.requestRowAction.requestedBySingular",description:"Describes the user that a request came from",values:{actorName:i.createdByActors[0].name}}),i.createdByActors.length>1&&n()(w.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {From {firstActorName} and {secondActorName}} other {From {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural",description:"Describes multiple users that a request came from",values:{firstActorName:i.createdByActors[0].name,secondActorName:null===(t=i.createdByActors[1])||void 0===t?void 0:t.name,numberOfOtherActors:i.createdByActors.length-1}})," · ",m))),n()("div",{style:d.actionButtons},void 0,n()(ue.Z,{disabled:o,isGray:!0,onClick:async()=>{await(0,M.kn)({...g,status:"rejected",from:"requests_center"})}},void 0,n()(w.FormattedMessage,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButtonLabel",description:"Label for button that allows user to reject a pending membership request"})),n()(de.Z,{disabled:o,isBlue:!0,onClick:async()=>{await(0,M.kn)({...g,status:"approved",from:"requests_center"})}},void 0,n()(w.FormattedMessage,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButtonLabel",description:"Label for button that allows user to approve a pending membership request"})))))}function De(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i,disabled:o}=e,r=(0,Ce.VK)((()=>s.filter((e=>{var t;return"pending"===(null===(t=e.accessRequestStore.getValue())||void 0===t?void 0:t.status)})).sort(((e,t)=>t.latestRequestTime-e.latestRequestTime))),[s]),a=(0,Ze.y)((e=>({requestColumn:{width:"100%"},table:{opacity:o?.4:1},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:3},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[o]),l={key:"request",header:void 0,style:a.requestColumn};return 0===r.length?n()("div",{style:a.zeroStateContainer},void 0,h.Z.mailRound(a.mailIcon),n()(w.FormattedMessage,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet",description:"Message in requests inbox telling user there are no requests yet."})):n()(Fe.Z,{hideHeader:!0,columns:[l],tableStyle:a.table,rows:r.map(((e,s)=>({key:"request".concat(s.toString()),columns:[n()("div",{style:{display:"flex",alignItems:"center"}},void 0,i<e.accessRequest.created_time&&n()("div",{style:{marginLeft:-18,marginRight:10}},void 0,n()(xe.z,{size:8})),n()(Ee,{store:t,request:e,disabled:o}))]})))})}function Ge(e){const{spaceStore:t,accessRequestsStore:s}=e,i=(0,ke.O7)(),[o,r]=(0,c.useState)(Date.now()),[,,a]=(0,Ce.oR)(void 0,Te.Z),l=(0,Ce.VK)((()=>a.getValueForSpace(t)),[t,a]),d=Boolean(null==l?void 0:l.disableMembershipRequests),[u,,]=(0,Ce.oR)(s),m=(0,Ze.y)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor}})),[]);(0,c.useEffect)((()=>{const{currentSpaceViewStore:e}=O.default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&r(t),F.createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:i,perform:t=>{F.applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);return g=u.error,h=u.result,u.ready?g||!h?n()("div",{style:m.errorContainer},void 0,n()(w.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})):p().createElement(p().Fragment,null,n()(qe,{spaceStore:t,securitySettingsStoreState:l,disabled:d}),n()(De,{spaceStore:t,accessRequestRenderValues:h,lastOpenedRequestCenterTime:o,disabled:d})):n()("div",{style:m.errorContainer},void 0,n()(ye.Z,{}));var g,h}function qe(e){const t=(0,ke.O7)(),{spaceStore:s,securitySettingsStoreState:i,disabled:o}=e,r=(0,Ze.y)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[]);return n()("div",{style:r.toggleContainer,onClick:async function(){if(i)if(i.disableMembershipRequests)(0,Pe.n)(t,{securitySettingsState:{...i,disableMembershipRequests:!1},spaceStore:s});else{await P.confirmUserAction({message:n()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.confirmationDialog.message",defaultMessage:"Are you sure you want to no longer allow members to request member invites?",description:"Dialog asking user to confirm that they wants to allow membership requests."}),description:n()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.confirmationDialog.description",defaultMessage:"Current requests will be on hold.",description:"Specifies after allowing membership requests, any existing requests will still be active."}),acceptLabel:n()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.confirmationDialog.acceptLabel",defaultMessage:"Confirm",description:"Confirm allow membership requests button."}),cancelLabel:n()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.confirmationDialog.cancelLabel",defaultMessage:"Cancel",description:"Cancel allow membership requests button."})})&&(0,Pe.n)(t,{securitySettingsState:{...i,disableMembershipRequests:!0},spaceStore:s})}}},void 0,n()("div",{style:r.titleDescription},void 0,n()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",description:"Title for a setting that, when on, will allow workspace members to request users to become workspace members.",defaultMessage:"Allow members to request adding other members"}),n()(Re.Z,{isSmall:!0,isMultiline:!0,style:r.description},void 0,n()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",description:"Description for a setting that, when on, will allow workspace members to request users to become workspace members.",defaultMessage:"Members can submit requests to admins to add more members"}))),n()(Ie.Z,{on:!o}))}var Oe=s(83890),Ue=s(98707),_e=s(27386),Ve=s(23189),Ne=s(33058),ze=s(82990),We=s(40394),Ke=s(33929),je=s(33846),He=s(60709),Qe=s(48690),Ye=s(30397),Je=s(52858),Xe=s(48762),$e=s(73581),et=s(93686);const tt=(0,w.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder",description:"Placeholder text for filtering teamspaces within a group."}});function st(e){const t=(0,ke.O7)(),s=(0,Ze.y)((()=>({teamMenuItem:{fontWeight:400}})),[]),[i,r]=(0,Ce.oR)(void 0,je.Z),[,a]=(0,Ce.oR)(Qe.Z),l=(0,c.useCallback)((e=>{a((t=>({...t,open:!0,tab:Qe.a.Members,selectedTeamId:e})))}),[a]),d=(0,Ce.VK)((()=>[{key:"teams for group",render:e=>p().createElement(pe.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>p().createElement(Xe.Z,o()({icon:n()(et.p,{disabled:!0,store:e}),title:n()(Re.Z,{style:s.teamMenuItem},void 0,e.getName()),right:n()(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",description:"Number of members in a teamspace, displayed in a popup showing teamspaces connected to a group.",values:{numMembers:e.getUserIdsInTeam().length}})},t)),action:()=>{l(e.id)},closeParentMenu:!0})))}]),[s,e.teamStores,l]),u=i.inputValue,m=n()(Je.Z,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},sections:d,initialFocus:0}),g=n()(pe.Z,{isInput:!0},void 0,n()($e.Z,{value:u,onChange:(0,c.useCallback)((e=>{r({inputValue:e.target.value,focus:!1})}),[r]),focus:!0,focusAfterAnimation:!0,placeholder:Ke.default.formatMessage(tt.filterTeams)})),h={menuType:re.Z.MenuType.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?g:void 0};return p().createElement(re.Z,h,m)}const it=function(e){const t=(0,Ce.qz)(void 0,se.Z),[s]=(0,Ce.oR)(Ye.Z),i=(0,Ze.y)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),r=(0,Ce.VK)((()=>s.teams.filter((t=>t.getMembers().some((t=>"group"===t.entity_type&&t.group_id===e.group.id))))),[s,e.group]);return n()(oe.Z,{popupType:oe.Z.PopupType.Popup,renderOrigin:e=>p().createElement(ue.Z,o()({disabled:0===r.length,style:0===r.length?i.noTeams:i.button},e),0===r.length?n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None",description:"Button for displaying that this group is not part of any teamspaces."}):n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",description:"Button for displaying how many teamspaces this group is a part of.",values:{numberOfTeams:r.length}}),r.length>0&&h.Z.chevronDown(i.chevron)),buttonPopupStore:t,placementToOrigin:He.Iw.Bottom,render:e=>n()(st,{parent:e,teamStores:r}),onClose:(0,c.useCallback)((()=>{t.reset()}),[t])})};var ot=s(38363),rt=s(19522),nt=s(58945),at=s(80527),lt=s(66722);function dt(e){const{group:t,spaceStore:s,settingsStore:i}=e,r=(0,Ce.qz)(void 0,se.Z);return n()(oe.Z,{popupType:lt.kQ.Popup,render:()=>n()(ut,{group:t,spaceStore:s,popupStore:r,settingsStore:i}),buttonPopupStore:r,renderOrigin:e=>p().createElement(at.Z,o()({icon:h.Z.dots},e))})}function ut(e){const{group:t,spaceStore:s,popupStore:i,settingsStore:r}=e,a=(0,G.Gc)(),l=(0,Ce.VK)((()=>s.canAdmin()),[s]),d=(0,ke.O7)(),m=(0,Ze.y)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),g=(0,c.useCallback)((async()=>{i.setState({open:!1});await P.confirmUserAction({message:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})&&(await F.createAndCommitAsync({environment:d,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async e=>{await R.Xv({environment:d,spaceStore:s,group:t,transaction:e})}}),k.trackPermissionGroupDelete(d))}),[t,d,s,i]),h=(0,c.useCallback)((()=>{r.setState({...r.state,editingNameGroupId:t.id,groupNameInputValue:t.name||""}),i.setState({open:!1}),k.trackPermissionGroupRename(d)}),[t,d,i,r]),b=(0,c.useCallback)((()=>{rt.Z.setState({...rt.Z.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),ot.lo("group_settings")}),[t]),f={key:"action_menu",render:e=>p().createElement(pe.Z,e),items:u().compact([{key:"rename",render:e=>p().createElement(nt.Z,o()({},e,{title:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})})),action:h},a?{key:"create_team_from_group",render:e=>p().createElement(nt.Z,o()({},e,{title:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group",description:"Button text shown when you click on the three-dot menu of a group in group settings. Clicking on it allows you to create a teamspace using the group's information."})})),action:b}:void 0,l&&{key:"delete",render:e=>p().createElement(nt.Z,o()({},e,{title:n()("div",{style:m.deleteButton},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"}))})),action:g}])};return n()(re.Z,{menuType:re.Z.MenuType.Popup},void 0,n()(ae.Z,{type:ae.Z.Type.Vertical,initialFocus:0,sections:[f],onAccept:()=>{i.setState({open:!1})}}))}var ct=s(8848),pt=s(16639),mt=s(49085);class gt extends mt.Z{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const ht=gt;var bt=s(86125),ft=s(41493),vt=s(33728),St=s(31299),yt=s(47082),wt=s(43997),Mt=s(97680);function kt(e){const{group:t,spaceStore:s,groupStore:i}=e,r=(0,Ce.qz)(void 0,se.Z),a=(0,Ze.y)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return n()(oe.Z,{popupType:lt.kQ.Popup,render:()=>n()(Ct,{spaceStore:s,group:t,popupStore:r,groupStore:i}),buttonPopupStore:r,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:a.popup,renderOrigin:e=>n()("div",{},void 0,p().createElement(ue.Z,o()({isGray:!0,icon:h.Z.plus,style:a.button},e),n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})))})}function Ct(e){const t=(0,ke.O7)(),s=(0,w.useIntl)(),{group:i,spaceStore:o,popupStore:r,groupStore:a}=e,l=(0,Ce.VK)((()=>a.state.temporaryUserIds.map((e=>{const t=o.getRecordValue({table:v.KJ,id:e});return n()(wt.vw,{userValue:t,format:wt.vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=a.state.temporaryUserIds.filter((t=>t!==e));a.setState({...a.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[o,a]),d=(0,Ce.VK)((()=>()=>{const{temporaryUserIds:e}=a.state,s=i.user_ids||[],n=u().union(s,e),l={...i,user_ids:n,last_edited_time:Date.now()};F.createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,perform:e=>{R.jF({spaceStore:o,group:l,transaction:e})}}),a.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),r.setState({open:!1}),k.trackPermissionGroupAddMembers(t,{add_member_count:e.length})}),[i,t,a,r,o]),p=(0,c.useCallback)((()=>{const{temporaryUserIds:e}=a.state,t=e.slice(0,e.length-1);a.setState({...a.state,temporaryUserIds:t})}),[a]),m=(0,c.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,vt.zI)(t),{currentSpaceStore:o}=O.default.state,{data:r}=K.default.state;if(!r||!o)return;const n=(0,D.uF)(r).map((e=>e.userId)),l=u().compact(n.map((e=>V.Z.createChildStore(o,{table:v.KJ,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!a.state.temporaryUserIds.includes(e.id)));a.setState({...a.state,temporaryUserIds:[...a.state.temporaryUserIds,...l.map((e=>e.id))],userInputValue:i})}),[a]),g=(0,Ce.VK)((()=>a.state.userInputValue),[a]),h=(0,Ce.VK)((()=>a.state.temporaryUserIds),[a]);return n()(re.Z,{menuType:re.Z.MenuType.Popup,tokenInputHeader:!0,header:n()(yt.Z,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:yt.Z.Format.Group,tokens:l,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:p,value:g,onChange:m,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:n()(Q.Z,{isLarge:!0,onClick:d},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"}))})},void 0,n()(Me.Z,{request:{query:g,temporaryUserIds:h},performRequest:async s=>{let{query:i,temporaryUserIds:o}=s;const r=e.group.user_ids||[];return(await St.O$({environment:t,query:i,membersOnly:!0})).filter((e=>r.indexOf(e.id)<0&&o.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>n()(Zt,{results:t,spaceStore:o,groupStore:a})}))}function Zt(e){const{spaceStore:t,groupStore:s}=e,[i,r]=(0,Ce.oR)(s,ht),a=(e.results||[]).map((e=>{let{id:t}=e;return t})),l=(0,Ce.VK)((()=>a.map((e=>{const s=V.Z.createChildStore(t,{table:v.KJ,id:e}).getValue();return{key:e,render:e=>p().createElement(Mt.Z,o()({},e,{user:s,useEmailAsTooltip:!0})),action:()=>{const t=[...i.temporaryUserIds,e];r({...i,temporaryUserIds:t,userInputValue:""})}}}))),[t,r,i,a]);if(0===a.length)return n()(pe.Z,{},void 0,n()(le.Z,{title:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})}));{const e={key:"user_menu",render:e=>p().createElement(pe.Z,e),items:l};return n()(ae.Z,{type:ae.Z.Type.Vertical,initialFocus:0,sections:[e]})}}function Pt(e){const{group:t,canEdit:s,spaceStore:i,settingsStore:r}=e,a=(0,Ce.qz)(void 0,ht),{groupMembers:l,remainingMembers:d}=(0,Ce.VK)((()=>{const{countRemainingUsers:e,totalNumberMembers:s,limitedUserValues:o}=(0,pt.rm)({group:t,spaceStore:i,limit:a.state.limitUsers&&!r.state.groupsFilter?10:void 0});return{groupMembers:(0,pt.N5)({userValues:o,spaceValue:i.state.value}),remainingMembers:e,totalMembers:s}}),[t,i,r,a]);return n()("div",{style:{padding:"4px 42px 8px"}},void 0,l.map((t=>p().createElement(Tt,o()({key:t.id,userValue:t},e)))),d>0&&n()(ue.Z,{isGray:!0,style:{marginTop:4},onClick:()=>{a.setState({...a.state,limitUsers:!1})}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:d}})),s?n()(kt,{group:t,spaceStore:i,groupStore:a}):l.length<1&&n()(ue.Z,{disabled:!0,isGray:!0},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside",description:"A label saying that there are no members inside this group."})))}function Tt(e){const{spaceStore:t,userValue:s,group:i,canEdit:o}=e,r=(0,ke.O7)(),a=(0,Ce.VK)((()=>t.state.value?(0,A.su)(t.state.value,s.id):"none"),[t,s]);return n()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},s.id,n()("div",{style:{display:"flex"}},void 0,n()(ft.Z,{userValue:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,b.Bc)(a)&&n()(bt.Z,{role:"membership_admin"===a?"membership_admin":"admin"})),o&&n()(ue.Z,{isGray:!0,hoveredStyle:{color:ct.ZP.red},onClick:async()=>{if(await P.confirmUserAction({message:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const e=(i.user_ids||[]).filter((e=>e!==s.id)),o={...i,user_ids:e,last_edited_time:Date.now()};F.createAndCommit({userAction:"SpacePermissionGroup.renderUser",environment:r,perform:e=>{R.jF({spaceStore:t,group:o,transaction:e})}}),k.trackPermissionGroupRemoveMember(r)}}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})))}s(73210);var It=s(13991),Rt=s(22808),xt=s(49312),Ft=s(77701),Bt=s(89206),At=s(40039),Lt=s(5210);function Et(e){const{row:t,canEdit:s,open:i,toggleOpenState:r,spaceStore:a,settingsStore:l}=e,d=t.group,u=(0,w.useIntl)(),m=(0,Ze.F)(),g=(0,ke.O7)(),b=pt.kF({intl:u,group:d}),f=(0,Ze.y)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:"rotateZ(".concat(i?0:-90,"deg)"),fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:ze.Z.getCompositeFontFamily(It.SP).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:ze.Z.fontWeight.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[i]),v=(0,c.useCallback)((e=>{const t={...d,icon:e,last_edited_time:Date.now()};F.createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:g,perform:e=>{R.jF({spaceStore:a,group:t,transaction:e})}}),k.trackPermissionGroupSetIcon(g,{is_emoji:(0,Rt.Z)(e)})}),[d,a,g]),S=(0,c.useCallback)((()=>{l.setState({...l.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[l]),y=(0,c.useCallback)((e=>{l.setState({...l.state,groupNameInputValue:e.target.value})}),[l]),M=(0,c.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=l.state,s=t.trim();if(e===d.id){if(s!==d.name){const e={...d,name:s,last_edited_time:Date.now()};F.createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:g,perform:t=>{R.jF({spaceStore:a,group:e,transaction:t})}})}l.setState({...l.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[d,g,a,l]),C=(0,Ce.VK)((()=>l.state.editingNameGroupId===d.id),[d,l]),Z=(0,Ce.VK)((()=>l.state.groupNameInputValue),[l]);function P(e){const t={width:e-4,height:e-4,fill:m.mediumIconColor},s={width:12,height:12,fill:m.mediumIconColor};return n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},void 0,h.Z.random(t),h.Z.plusThick(s))}return n()("div",{style:f.container},void 0,n()(Lt.Z,{isSidebar:!1,fill:!0,icon:"chevron",open:i,color:m.mediumIconColor,onClick:()=>r(d.id),style:f.toggle}),n()(Ft.Z,{size:28,style:f.icon}),C?n()(Bt.Z,{capture:!0,onEsc:S},void 0,n()(Se.Z,{disabled:!s,type:xt.Z.Type.Inline,style:f.input,placeholder:u.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:Z,onChange:y,onBlur:M,onSubmit:M})):n()(Re.Z,{style:f.name,showTooltipWhenTruncated:!0},void 0,b),(T=t.isRowHovered,d.icon?n()(At.Z,s?{disabled:!1,bucket:"public",icon:d.icon?{pointer:a.pointer,icon:d.icon}:void 0,size:18,isEmptyPage:!1,title:b,onChange:v,style:f.icon}:{disabled:!0,bucket:"public",icon:d.icon?{pointer:a.pointer,icon:d.icon}:void 0,size:18,isEmptyPage:!1,title:b,style:f.icon}):T&&s?n()(me.Z,{renderTooltip:()=>n()(w.FormattedMessage,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip",description:"Tooltip explaining that user can add an icon for a group"}),render:e=>p().createElement(At.Z,o()({disabled:!1,bucket:"public",icon:d.icon?{pointer:a.pointer,icon:d.icon}:void 0,size:18,isEmptyPage:!1,title:b,onChange:v,style:{...f.icon,width:30},defaultIcon:P(18)},e))}):void 0));var T}function Dt(e){let{groups:t,canEdit:s,spaceStore:i,permissionsSettingsStore:o}=e;const[r,a]=(0,c.useState)([]),l=(0,Ze.F)(),d=(0,G.Gc)(),u=(0,Ce.VK)((()=>(0,g.ZP)(o.state.groupsFilter,t,(e=>e.name||""))),[o,t]),p=(0,c.useCallback)((e=>{a((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[a]),m=(0,c.useMemo)((()=>function(e){return e.map((e=>({id:e.id,group:e,isClickable:!1})))}(u)),[u]),h=(0,c.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,spaceStore:o,settingsStore:r,isTeamEnabled:a}=e;const l={id:"title",headerTitle:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group",description:"Title of the groups column of the groups table."}),renderCell:e=>n()(Et,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:o,settingsStore:r}),widthData:{width:120},hasClickableContents:!1,sortable:!1},d={id:"teams",headerTitle:n()("div",{style:{paddingLeft:8}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces",description:"Title of the teamspaces column of the groups table."})),renderCell:e=>n()("div",{style:ze.Z.textOverflowStyle},void 0,n()(it,{group:e.group})),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members",description:"Title of the members column of the groups table."}),renderCell:e=>{var t;return n()("div",{style:ze.Z.textOverflowStyle},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:(null===(t=e.group.user_ids)||void 0===t?void 0:t.length)||0}}))},widthData:{width:40},hasClickableContents:!1,sortable:!1},c={id:"menu",headerTitle:null,renderCell:e=>n()(dt,{group:e.group,spaceStore:o,settingsStore:r}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[l,...a?[d]:[],u,...i?[c]:[]]}({openRowIds:r,toggleOpenRowId:p,canEdit:s,spaceStore:i,settingsStore:o,isTeamEnabled:d})),[r,p,s,i,o,d]),b=(0,We.b)({columnRenderInfo:h,theme:l});return n()(We.D,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:h,rows:m,styles:b,renderNoRowsComponent:()=>n()(Re.Z,{isSmall:!0,style:{marginLeft:5,marginTop:10,marginBottom:20}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found.",description:"Message displayed on the groups table in space settings when there are no groups matching the user's search query."})),renderRowChild:e=>r.includes(e.id)?n()(Pt,{group:e.group,canEdit:s,spaceStore:i,settingsStore:o}):void 0})}var Gt=s(66957);const qt=(0,w.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder",description:"Placeholder text for filtering teamspaces within a group."}});function Ot(e){const t=(0,ke.O7)(),s=(0,Ze.y)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),[i,r]=(0,Ce.oR)(void 0,je.Z),[,a]=(0,Ce.oR)(Qe.Z),l=(0,c.useCallback)((e=>{a((t=>({...t,open:!0,tab:Qe.a.Members,selectedTeamId:e})))}),[a]),d=(0,Ce.VK)((()=>[{key:"teams for member",render:e=>p().createElement(pe.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>p().createElement(Xe.Z,o()({icon:n()(et.p,{disabled:!0,store:e}),title:n()(Re.Z,{style:s.teamMenuItem},void 0,e.getName()),caption:n()(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",description:"Number of members in a teamspace, displayed in a popup showing teamspaces that a member is part of.",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0},t)),action:()=>{l(e.id)},closeParentMenu:!1})))}]),[e.teamStores,s.teamMenuItem,l]),u=i.inputValue,m=n()(pe.Z,{isInput:!0},void 0,n()($e.Z,{value:u,onChange:(0,c.useCallback)((e=>{r({inputValue:e.target.value,focus:!1})}),[r]),focus:!0,focusAfterAnimation:!0,placeholder:Ke.default.formatMessage(qt.filterTeams)})),g={menuType:re.Z.MenuType.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?m:void 0};return p().createElement(re.Z,g,n()(Je.Z,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:d}))}const Ut=function(e){const[t]=(0,Ce.oR)(Ye.Z),s=(0,Ze.y)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),i=(0,Ce.VK)((()=>t.teams.filter((t=>t.getMembers().some((t=>"user"===t.entity_type&&t.user_id===e.member.userId))))),[t,e.member]),r=i.length;return n()(oe.Z,{popupType:oe.Z.PopupType.Popup,renderOrigin:e=>p().createElement(ue.Z,o()({disabled:0===r,style:0===r?s.noTeams:s.button},e),0===r?n()(w.FormattedMessage,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"None",description:"Message to show a member is not part of any teamspaces."}):p().createElement(p().Fragment,null,n()(w.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",description:"Number of teamspaces that a member is part of.",values:{numberOfTeams:r}}),h.Z.chevronDown(s.chevron))),render:()=>n()(Ot,{member:e.member,teamStores:i})})};var _t=s(69435);class Vt extends m.Z{constructor(){super(...arguments),l()(this,"storeTypes",{spacePermissionsSettingsStore:z.Z,getRecoverableSpaceUserContentRequestStore:N.Z,accessRequestsStore:N.Z}),l()(this,"userIdsWithContentBeingReprovisioned",new H.default([])),l()(this,"renderReprovisioningData",((e,t,s)=>t?n()(Fe.Z,{columns:[{key:"user",header:n()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:n()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages",description:"Column header for number of private pages each user has"}),style:{width:"25%"}},{key:"action",header:n()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:t.recentSpaceRecoverPages.map((e=>{let{userId:t,privatePagesCount:s}=e;const i=V.Z.createChildStore(this.props.store,{table:v.KJ,id:t}).getValue();return{key:t,columns:[this.renderMember(i),s,this.userIdsWithContentBeingReprovisioned.state.includes(t)?n()(ye.Z,{}):n()("div",{style:{marginLeft:-4}},void 0,n()(Oe.Z,{mode:Ue.z.Button,focused:!1,title:n()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:this.props.store,userIds:this.userIdsWithContentBeingReprovisioned.state,onChange:e=>{let[s]=e;this.handleReprovisionToUserChange(t,s)},disabled:0===s||void 0}))]}}))}):!s&&n()(ye.Z,{}))),l()(this,"handleUpdateClick",(()=>{const e=(0,w.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});T.j({message:e.updatingPermissions})})),l()(this,"handleUpdateComplete",(()=>{T.x()})),l()(this,"handleTabClick",((e,t)=>{const s=this.getCurrentTabs(t)[e];switch(s){case z.Q.Members:k.trackPermissionsSettingsTabClick(this.environment,{tab:"members"});break;case z.Q.Groups:k.trackPermissionsSettingsTabClick(this.environment,{tab:"groups"});break;case z.Q.Guests:k.trackPermissionsSettingsTabClick(this.environment,{tab:"guests"});break;case z.Q.Reprovisioning:k.trackPermissionsSettingsTabClick(this.environment,{tab:"reprovisioning"});break;case z.Q.Requests:k.trackPermissionsSettingsTabClick(this.environment,{tab:"requests"});break;default:(0,y.t1)(s)}this.stores.spacePermissionsSettingsStore.state.currentTab===z.Q.Requests&&s!==z.Q.Requests&&j.Z.reset(),this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:s})})),l()(this,"handleCreateGroupClick",(()=>{F.createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:this.environment,perform:e=>{const t=R.mo({environment:this.environment,spaceStore:this.props.store,transaction:e});t&&this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,editingNameGroupId:t.id,groupNameInputValue:""})}}),k.trackPermissionGroupCreate(this.environment)})),l()(this,"handleFilterChange",(e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,groupsFilter:e.target.value})})),l()(this,"handleMembersShowMoreClick",(()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitMembers:!1})})),l()(this,"handleGuestsShowMoreClick",(()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitGuests:!1})})),l()(this,"handleInviteLinkClick",(()=>{const e=!this.getInviteLinkEnabled();k.trackInviteLinkUpdated(this.environment,{enabled:e}),F.createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:this.environment,perform:t=>{R.ys({transaction:t,spaceStore:this.props.store,inviteLinkEnabled:Boolean(e)})}})})),l()(this,"handleSortClick",((e,t)=>{const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];let i;i=!(!s||s.by!==t)&&s.asc,this.stores.spacePermissionsSettingsStore.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!i}}})))})),l()(this,"handleMemberPermissionRoleChange",(async(e,t,s)=>{const{store:i}=this.props,o=this.environment.currentUser.id;if(e.userId!==o||"none"!==t)this.handleUpdateClick(),"none"===t?(await C.removeUsersFromSpace(this.environment,{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!0}),await x.bi(this.environment)):F.createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:this.environment,perform:s=>I.ep({environment:this.environment,store:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),this.handleUpdateComplete();else{await R.bf({environment:this.environment,spaceId:i.id,userSettingsStore:s})&&W.ZP.setState({...W.ZP.state,open:!1})}})),l()(this,"handleReprovisionToUserChange",(async(e,t)=>{if(!(await P.confirmUserAction({message:n()("span",{},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Are you sure you want to transfer their private pages? This action cannot be undone."})),acceptLabel:n()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})})))return;this.userIdsWithContentBeingReprovisioned.setState([...this.userIdsWithContentBeingReprovisioned.state,e]);const s=await C.transferSpaceUserContent(this.environment,{spaceId:this.props.store.id,fromUserId:e,toUserId:t});"failed"===s.type&&P.showError(s),await this.stores.getRecoverableSpaceUserContentRequestStore.refresh(),this.userIdsWithContentBeingReprovisioned.setState(this.userIdsWithContentBeingReprovisioned.state.filter((t=>t!==e)))}))}willMount(){this.setInitialSubtabOnMount()}renderComponent(){const{store:e,isMobile:t}=this.props;if(!U.Z.state.online)return this.renderOfflineMessage();const{data:s}=K.default.state;if(!s)return this.renderLoadingSpinner();const i=D.uF(s);if(!u().every(i.map((t=>V.Z.createChildStore(e,{table:v.KJ,id:t.userId}).isReady()))))return this.renderLoadingSpinner();const o=i.filter(S.CF),r=i.filter(S.du),{currentTab:a}=this.stores.spacePermissionsSettingsStore.state;if(t)return n()(c.Fragment,{},void 0,this.canEditMembership()&&n()(pe.Z,{shouldShowBottomDivider:!0},void 0,this.renderMobileInviteButton(),n()("div",{style:this.mobileMenuItemStyle()},void 0,this.renderInviteLink())),n()(pe.Z,{},void 0,this.renderSpaceMembers(o)));const l={[z.Q.Members]:n()(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members ({numberOfMembers})",values:{numberOfMembers:o.length}}),[z.Q.Groups]:n()(w.FormattedMessage,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),[z.Q.Guests]:n()(w.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests ({numberOfGuests})",values:{numberOfGuests:r.length}}),[z.Q.Reprovisioning]:n()(w.FormattedMessage,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),[z.Q.Requests]:p().createElement(p().Fragment,null,n()(w.FormattedMessage,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests",description:"Label for a tab that shows a list of requests waiting for approval"}),this.renderNumberOfRequests(),this.renderUnreadRequestDot())},d=this.getCurrentTabs(r),m=d.map((e=>l[e]));return n()(_e.Z,{},void 0,n()(Gt.Z,{tabs:m,selectedIndex:d.indexOf(a),onChange:e=>this.handleTabClick(e,r),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),this.renderTab(a,o,r))}renderLoadingSpinner(){return n()(ye.Z,{style:{margin:"calc(50% - 1em) auto"}})}renderOfflineMessage(){return n()(Re.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."}))}renderHelp(){return n()("div",{style:{marginTop:24,marginBottom:24}},void 0,n()(fe.Z,{title:n()(w.FormattedMessage,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,L.UY)("guides.members"),analyticsFrom:"members_settings"}))}renderTab(e,t,s){return e===z.Q.Members?n()(c.Fragment,{},void 0,this.renderSpaceMembers(t)):e===z.Q.Guests?n()(c.Fragment,{},void 0,this.renderSpaceGuests(s)):e===z.Q.Groups?this.renderGroupsTab():e===z.Q.Reprovisioning?this.renderReprovisioning():e===z.Q.Requests?this.renderRequestsTab():void(0,y.t1)(e)}renderUnreadRequestDot(){if(this.props.unreadAccessRequests&&this.props.unreadAccessRequests>0)return n()(xe.z,{color:this.theme.redBadgeBackground,style:{marginLeft:6}})}renderGroupsTab(){const{store:e}=this.props,{groupsFilter:t}=this.stores.spacePermissionsSettingsStore.state,s=e.getValue(),i=this.canUseGroups(),r=this.canAdmin(),a="on"===_.default.getGroup("show_workspace_owner"),l=n()(w.FormattedMessage,a?{id:"spacePermissionsSettings.groupsTab.workspaceOwnersOnly",defaultMessage:"Only workspace owners can add a permission group.",description:"Caption that restricts groups creation to workspace owners"}:{id:"spacePermissionsSettings.groupsTab.adminsOnly",defaultMessage:"Only admins can add a permission group."});if(s){const a=s.permission_groups||[];return n()("div",{},void 0,i?n()(Re.Z,{isMultiline:!0,style:{width:"80%"}},void 0,(0,G.bq)()?n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk.",description:"Describes the purpose of groups with the context of teamspaces."}):n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu.",description:"Describes the purpose of groups."})):n()(_t.Z,{for:"team",from:"permission_groups",icon:h.Z.group,title:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeCaption",defaultMessage:"Upgrade to the Team Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),n()(X.Z,{size:24,isHidden:!0}),n()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},void 0,i&&n()(me.Z,{renderTooltip:()=>!r&&l,render:e=>p().createElement(Q.Z,o()({isLarge:!0,onClick:this.handleCreateGroupClick,disabled:!r},r?void 0:e),n()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"}))}),a.length>0&&n()(Se.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…",description:"Search input placeholder shown above a table that displays all groups."}),left:h.Z.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:Se.Z.Format.Small,value:t,style:{...Vt.filterStyle,marginRight:0},onChange:this.handleFilterChange})),a.length>0&&n()(Dt,{spaceStore:e,permissionsSettingsStore:this.stores.spacePermissionsSettingsStore,groups:a,canEdit:this.canEditGroups()}))}}renderSpaceMembers(e){return this.props.isMobile?this.renderMobileMemberList(e):n()("div",{},void 0,!this.shouldRenderUpsell()&&this.renderHelp(),this.shouldRenderUpsell()&&this.renderUpsell(),this.renderInviteLink(),this.renderDesktopMemberList(e))}renderInviteLink(){if(!this.canUseInviteLink())return;const e=this.getInviteLink(),t=this.getInviteLinkEnabled();if(!e)return;const{spacePermissionsSettingsStore:s}=this.stores;return n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"}},void 0,n()("div",{style:{marginRight:8,flexGrow:1}},void 0,n()(Ve.Z,{},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})),n()(Re.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"}},void 0,n()(w.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this.",description:"Label that is shown above the invite link."})," ",!this.props.isMobile&&this.renderInviteLinkReset())),n()("div",{style:{marginTop:5}},void 0,n()(Ie.Z,{on:t,onClick:this.handleInviteLinkClick}))),s&&t&&e&&this.renderInviteLinkUrl(e),n()(X.Z,{size:40}))}renderInviteLinkReset(){var e=this;const{store:t}=this.props,s=t.getValue();if(s)return n()(w.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n()(ve.Z,{onClick:()=>{P.showDialog({message:n()(w.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:P.dismissDialog,items:[{label:n()(w.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await C.refreshInviteLink(e.environment,{spaceId:s.id}),x.bi(e.environment)}}]})}},void 0,i)}}})}renderInviteLinkUrl(e){const{mobileNative:t}=this.environment,s=n()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),i=()=>{Z.RD({environment:this.environment,stringValue:e,copiedMessage:Z.tq.copiedLinkToClipboard}),k.trackWorkspaceInviteCopyLink(this.environment)},o=()=>{t&&t.share(e),k.trackWorkspaceInviteCopyLink(this.environment)};return this.props.isMobile?n()("div",{},void 0,n()(Se.Z,{type:"text",format:Se.B.Default,value:e,disabled:!0}),t?n()(de.Z,{onClick:o,style:{marginTop:10,width:"100%"}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})):n()(de.Z,{onClick:i,style:{marginTop:10,width:"100%"}},void 0,s)):n()("div",{},void 0,n()("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12}},void 0,n()(Se.Z,{type:"text",format:Se.B.Default,value:e,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),n()(Q.Z,{onClick:i,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,width:90},isLarge:!0},void 0,s)))}renderMobileMemberList(e){const{store:t}=this.props;return n()(c.Fragment,{},void 0,e.map((e=>{const s=V.Z.createChildStore(t,{table:v.KJ,id:e.userId}).getValue();return n()("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:"1px solid ".concat(this.theme.lightDividerColor),background:this.theme.cardContentBackground}},void 0,this.renderMember(s),n()("div",{style:{textAlign:"center",marginLeft:"auto"}},void 0,this.renderUserPermission(e)))})))}renderUpsell(){const{data:e}=K.default.state,t=!e||"unsubscribed_guest"!==e.type&&D.Ln(this.environment,e)||"subscribed_admin"===e.type?"team":"team_free";return p().createElement(p().Fragment,null,n()(_t.Z,{for:t,from:"members_settings",icon:h.Z.membersFilled,title:n()(w.FormattedMessage,{id:"spacePermissionSettings.memberUpsell.title",defaultMessage:"Share with unlimited members"}),caption:n()(w.FormattedMessage,{id:"spacePermissionSettings.memberUpsell.caption",defaultMessage:"Try Notion for Teams for a collaborative workspace, unlimited team members, and advanced permissions."}),learnMoreRoute:"guides.members",upgradeMessage:n()(w.FormattedMessage,"team_free"===t?{id:"spacePermissionSettings.memberUpsell.alternativeTrialLabel",defaultMessage:"Try it free"}:{id:"spacePermissionSettings.memberUpsell.alternativeUpgradeLabel",defaultMessage:"Upgrade to Team Plan"})}),n()(X.Z,{size:48}))}renderDesktopMemberList(e){const{spacePermissionsSettingsStore:t}=this.stores,{membersFilter:s,limitMembers:i}=t.state,o=this.getFilteredMembers(e,s),r=this.sortUsers("members",o),a=i?r.slice(0,Vt.defaultLimit):r;return n()(p().Fragment,{},void 0,n()("div",{style:{marginRight:8,flexGrow:1}},void 0,n()(Ve.Z,{},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"}))),this.renderInviteViaDomainCaption(),n()(X.Z,{size:16,isHidden:!0}),n()("div",{},void 0,n()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},void 0,this.renderInviteButton(),n()(Se.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:h.Z.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:Se.Z.Format.Small,value:s,style:Vt.filterStyle,onChange:e=>{t.setState({...t.state,membersFilter:e.target.value,limitMembers:!0})}})),this.renderUserTable("members",a),r.length>Vt.defaultLimit&&i&&n()(Ne.Z,{style:Vt.showMoreButtonStyle,onClick:this.handleMembersShowMoreClick},void 0,n()(w.FormattedMessage,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:r.length-Vt.defaultLimit}}))))}renderSpaceGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{guestsFilter:s,limitGuests:i}=t.state,o=this.getFilteredMembers(e,s),r=this.sortUsers("guests",o),a=i?r.slice(0,Vt.defaultLimit):r;return n()("div",{},void 0,n()("div",{},void 0,n()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},void 0,n()(Se.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:h.Z.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:Se.Z.Format.Small,value:s,style:Vt.filterStyle,onChange:e=>{t.setState({...t.state,guestsFilter:e.target.value,limitGuests:!0})}})),this.renderUserTable("guests",a),r.length>Vt.defaultLimit&&i&&n()(Ne.Z,{style:Vt.showMoreButtonStyle,onClick:this.handleGuestsShowMoreClick},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:r.length-Vt.defaultLimit}}))))}renderMobileInviteButton(){return n()(c.Fragment,{},void 0,n()("div",{style:this.mobileMenuItemStyle()},void 0,this.renderInviteButton({flex:1})),n()("div",{style:{borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}))}renderInviteButton(e){const{store:t}=this.props;return n()(q.LazyPermissionsInviteWithModal,{disabled:!this.canEditMembership(),store:t,onInviteClick:this.handleUpdateClick,onInviteComplete:this.handleUpdateComplete,isSubscribed:this.isSubscribed(),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e})}renderInviteViaDomainCaption(){const{store:e}=this.props;return R.LV(e)?n()(Re.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,n()(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})):n()("div",{},void 0,n()(Re.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6}},void 0,n()(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n()(ve.Z,{onClick:()=>{W.ZP.setState({...W.ZP.state,currentTab:"settings",defaultSubtab:void 0})}},void 0,t)}}})),n()(Re.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,n()(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"Note: you will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n()(ve.Z,{href:(0,L.UY)("guides.billingGuide")},void 0,t)}}})))}getFilteredMembers(e,t){const{store:s}=this.props;return t&&t.length>0?(0,g.ZP)(t,e,(e=>{const t=V.Z.createChildStore(s,{table:v.KJ,id:e.userId}).getValue();return t?(0,v.of)(t):""})):e}sortUsers(e,t){const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];if(!s)return t;const{store:i}=this.props;switch(s.by){case"role":return t.sort(((e,t)=>(b.xm[t.role]-b.xm[e.role])*(s.asc?-1:1)));case"name":return t.map((e=>({user:e,store:V.Z.createChildStore(i,{table:v.KJ,id:e.userId})}))).sort(((e,t)=>{const i=e.store.getValue(),o=t.store.getValue(),r=(0,v.Nz)(this.props.intl,i),n=(0,v.Nz)(this.props.intl,o);return r.localeCompare(n)*(s.asc?1:-1)})).map((e=>e.user))}}renderSmallArrow(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?h.Z.arrowDownSmall({...s,transform:"rotate(180deg)"}):h.Z.arrowDownSmall(s)}renderUserTable(e,t){const{store:s}=this.props,i=this.stores.spacePermissionsSettingsStore.state.sorts[e],o={key:"user",header:n()(Y.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"name")},style:{display:"flex",alignItems:"center"}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),i&&"name"===i.by&&this.renderSmallArrow({up:i.asc})),style:{width:"60%"}},r={key:"teams",header:n()(Y.Z,{disabled:!1,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces",description:"Label for a column shows the teamspaces that a user is part of."})),style:{width:"20%",textAlign:"center"},sortable:!1},a={key:"access_level",header:n()(Y.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"role")},style:{display:"flex",alignItems:"center",paddingLeft:8}},void 0,n()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),i&&"role"===i.by&&this.renderSmallArrow({up:i.asc})),style:{width:"20%",textAlign:"center"}},l="members"===e&&(0,G.bq)()?[o,r,a]:[o,a];return n()(Fe.Z,{columns:l,rows:t.map((e=>({member:e,store:V.Z.createChildStore(s,{table:v.KJ,id:e.userId})}))).filter((e=>void 0!==e.store.getValue())).map((t=>{const{member:s,store:i}=t,o=i.getValue(),r=[this.renderMember(o)];return"members"===e&&(0,G.bq)()&&r.push(p().createElement(p().Fragment,null,this.renderTeams(s))),r.push(p().createElement(p().Fragment,null,this.renderUserPermission(s))),{key:s.userId,columns:r}}))})}renderMember(e){return n()(J.Z,{userValue:e})}renderTeams(e){if("none"!==e.role)return n()(Ut,{member:e})}renderUserPermission(e){return"none"===e.role?n()(be,{store:this.props.store,guest:e,isSubscribed:this.isSubscribed()}):this.renderMemberRoleSelect(e)}renderMemberRoleSelect(e){const t=this.environment.currentUser.id,{currentUserSettingsStore:s}=O.default.state;if(!s)return;const i=this.getAvailableRoleItems();let o=!0;return(this.canAdmin()||this.canEditMembership()&&(b.RN(e.role)||e.userId===t))&&(o=!1),n()(we.Z,{role:e.role,table:f.bx,type:"user_permission",disabled:o,isUserPermission:e.userId===t,isSubscribed:this.isSubscribed(),upgradeButtonName:"space_permission_item",onChange:t=>this.handleMemberPermissionRoleChange(e,t,s),availableRoleItems:i})}renderReprovisioning(){const e="on"===_.default.getGroup("show_workspace_owner");return p().createElement(p().Fragment,null,n()(Re.Z,{isMultiline:!0,style:{width:"80%"}},void 0,n()(w.FormattedMessage,e?{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this.",description:"Description that shows on the transfer content tab in settings"}:{id:"spacePermissionsSettings.reprovisioningTab.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace admins can see this."})),n()(X.Z,{size:24,isHidden:!0}),n()(Me.Z,{requestStore:this.stores.getRecoverableSpaceUserContentRequestStore,request:{spaceId:this.props.store.id},performRequest:async e=>{const t=await C.getRecoverableSpaceUserContent(this.environment,{spaceId:e.spaceId});if("failed"===t.type)throw P.showError(t),t;return t.data},render:this.renderReprovisioningData}))}renderRequestsTab(){return n()(Ge,{spaceStore:this.props.store,accessRequestsStore:this.stores.accessRequestsStore})}renderNumberOfRequests(){return n()(Me.Z,{throttle:1e3,request:{parentTable:"space",parentId:this.props.store.id,size:100,status:"pending"},requestStore:this.stores.accessRequestsStore,performRequest:async e=>{const t=await C.getAccessRequests(this.environment,e);if("failed"===t.type)throw t.error;const s=t.data.accessRequestIds;return(0,M.Tr)(this.props.store,s)},render:(e,t,s)=>e||!t?n()("span",{}):t?n()("span",{},void 0," ","(",t.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).length,")"):void 0})}setInitialSubtabOnMount(){W.ZP.state.open&&"members"===W.ZP.state.currentTab&&W.ZP.state.defaultSubtab&&(this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:W.ZP.state.defaultSubtab}),W.ZP.setState({...W.ZP.state,defaultSubtab:void 0}))}getAvailableRoleItems(){const e=this.props.intl.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member",description:"Tooltip shown over disabled role upgrades"}),t=(0,A.U7)();return u().compact(b.an.map((s=>{if(t||"membership_admin"!==s)return{role:s,disabledInfo:!this.canAdmin()&&b.Bc(s)?{isDisabled:!0,disabledMessage:e}:void 0}})))}getCurrentTabs(e){return[z.Q.Members,z.Q.Groups,...e.length>0?[z.Q.Guests]:[],...this.canReprovisionContent()?[z.Q.Reprovisioning]:[],...this.shouldShowRequestsTab()?[z.Q.Requests]:[]]}isSubscribed(){const{data:e}=K.default.state;return Boolean(e&&D.YK(e))}canAdmin(){return this.props.store.canAdmin()}canEditMembership(){return this.props.store.canEditMembership()}canUseGroups(){return D.qF(this.environment)&&this.isSubscribed()}canEditGroups(){return this.canUseGroups()&&this.canEditMembership()}canUseInviteLink(){return this.canEditMembership()&&D.qF(this.environment)}canReprovisionContent(){return this.canAdmin()&&"enterprise"===D.CM(this.environment)&&"on"===_.default.getGroup("content-reprovisioning")}shouldShowRequestsTab(){const{store:e}=this.props;return!!e.getKeyStore("settings").getKeyStore("seen_membership_requests").getValue()&&(this.canEditMembership()&&(0,B.p1)(this.environment))}shouldRenderUpsell(){return Boolean("personal"===this.props.store.getPlanType()&&this.canAdmin())}getInviteLinkEnabled(){return Boolean(this.props.store.getKeyStore("invite_link_enabled").getValue())}getInviteLink(){if(!this.canEditMembership())return;const e=K.default.state.data,t=this.props.store.id,s=e&&("subscribed_admin"===e.type||"unsubscribed_admin"===e.type||"subscribed_membership_admin"===e.type)&&e.inviteLinkCode;return s?(0,E.createSpaceInviteLinkUrl)(this.environment,t,s):void 0}getSearchIconStyle(){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}mobileMenuItemStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:e.getSafePaddingRightCSS(14),background:this.theme.cardContentBackground}}}l()(Vt,"defaultLimit",50),l()(Vt,"filterStyle",{maxWidth:250,borderRadius:30}),l()(Vt,"showMoreButtonStyle",{marginTop:8});const Nt=(0,w.injectIntl)(Vt)},42982:(e,t,s)=>{s.d(t,{Z:()=>p});var i=s(77094),o=s.n(i),r=(s(67294),s(83355)),n=s(5366),a=s(86512),l=s(47966),d=s(23189),u=s(46951);class c extends r.Z{renderComponent(){return o()("div",{},void 0,this.renderHeader(),o()("div",{style:this.getSettingsOptionStyle()},void 0,o()(u.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,this.renderMessage()),this.renderManageSubscriptionButton()))}renderHeader(){const{device:e}=this.environment;return o()(d.Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},void 0,o()(n.FormattedMessage,{id:"subscriptionSettings.title",defaultMessage:"Subscription"}))}renderMessage(){const{device:e}=this.environment;return e.isMobile?o()(n.FormattedMessage,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."}):o()(n.FormattedMessage,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."})}renderManageSubscriptionButton(){return o()(a.Z,{href:"https://apps.apple.com/account/subscriptions"},void 0,o()(l.Z,{isLarge:!0,style:{marginTop:12,marginBottom:4}},void 0,o()(n.FormattedMessage,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}const p=c},40235:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(77094),o=s.n(i),r=s(77422),n=s.n(r),a=(s(67294),s(83355)),l=s(82990),d=s(46951);class u extends a.Z{renderComponent(){const{columns:e,rows:t,cellStyle:s,tableStyle:i,hideHeader:r}=this.props;return o()("table",{style:{...this.getStyle(),...i}},void 0,!r&&o()("thead",{},void 0,o()("tr",{style:u.headerRowStyle},void 0,e.map((e=>o()("th",{style:{...u.tableHeaderStyle,...e.style}},e.key,o()(d.Z,{isSmall:!0},void 0,e.header)))))),o()("tbody",{},void 0,t.map((t=>o()("tr",{style:this.getRowStyle()},t.key,t.columns.map(((t,i)=>{const r=e[i];return o()("td",{style:{...u.cellStyle,...s}},r.key,t)})))))))}getStyle(){return{width:"100%",fontSize:13,borderTop:"1px solid ".concat(this.theme.regularDividerColor),borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}getRowStyle(){return{width:"100%",borderTop:"1px solid ".concat(this.theme.regularDividerColor)}}}n()(u,"cellPaddingTopBottom",8),n()(u,"headerRowStyle",{height:32,width:"100%"}),n()(u,"tableHeaderStyle",{fontWeight:l.Z.fontWeight.regular,textAlign:"left",paddingTop:u.cellPaddingTopBottom,paddingBottom:u.cellPaddingTopBottom}),n()(u,"cellStyle",{paddingTop:u.cellPaddingTopBottom,paddingBottom:u.cellPaddingTopBottom});const c=u},69435:(e,t,s)=>{s.d(t,{Z:()=>f});var i=s(77094),o=s.n(i),r=s(77422),n=s.n(r),a=(s(33948),s(67294),s(83355)),l=s(82990),d=s(5366),u=s(50906),c=s(26111),p=s(93678),m=s(33665),g=s(72693),h=s(47966);class b extends a.Z{constructor(){super(...arguments),n()(this,"handleUpgradeClick",(e=>{const{from:t,for:s,onUpgradeClick:i}=this.props;p.y(this.environment,{from:t,for:s}),i&&i(e)})),n()(this,"handleLearnMoreClick",(()=>{const{from:e,learnMoreRoute:t}=this.props;(0,c.navigateToExternalURL)({environment:this.environment,url:(0,m.UY)(t)}),u.trackClickHelpButton(this.environment,{from:e})}))}renderComponent(){return o()("section",{style:this.getWrapStyle()},void 0,this.renderIcon(),this.renderTitle(),this.renderCaption(),this.renderActions())}renderIcon(){const{icon:e}=this.props;return e(this.getIconStyle())}renderTitle(){const{title:e}=this.props;return o()("header",{style:this.getTitleStyle()},void 0,e)}renderCaption(){const{caption:e}=this.props;return o()("p",{style:this.getCaptionStyle()},void 0,e)}renderActions(){return o()("footer",{},void 0,this.renderUpgradeButton(),this.renderLearnMoreButton())}renderUpgradeButton(){const{upgradeMessage:e}=this.props;return o()(g.Z,{onClick:this.handleUpgradeClick,isLarge:!0},void 0,e||o()(d.FormattedMessage,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"}))}renderLearnMoreButton(){return o()(h.Z,{onClick:this.handleLearnMoreClick,style:this.getLearnMoreButtonStyle()},void 0,o()(d.FormattedMessage,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"}))}getWrapStyle(){const{device:e}=this.environment;return{fontSize:14,...!e.isMobile&&{maxWidth:340}}}getIconStyle(){return{width:32,height:"auto",fill:this.theme.mediumIconColor,marginBottom:8}}getTitleStyle(){return{fontWeight:l.Z.fontWeight.semibold}}getCaptionStyle(){return{color:this.theme.mediumTextColor,marginTop:4,marginBottom:16}}getLearnMoreButtonStyle(){return{marginLeft:12}}}const f=b},30045:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(77094),o=s.n(i),r=s(77422),n=s.n(r),a=(s(33948),s(67294),s(83355)),l=s(63143),d=s(5366),u=s(54642),c=s(17256),p=s(27832),m=s(72087),g=s(4122),h=s(47966),b=s(7765),f=s(23189),v=s(46951);class S extends a.Z{constructor(){super(...arguments),n()(this,"storeTypes",{requestStore:m.Z}),n()(this,"renderResult",((e,t,s)=>o()(g.Z,{loaded:s,spinnerSize:16,showSpinnerTimeout:600},void 0,e||!t?o()("div",{},void 0,this.props.intl.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})):this.renderOutput(t)))),n()(this,"renderOutput",(e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),s=t?this.revokeDataAccess:this.grantDataAccess;return o()("div",{style:this.getSettingsOptionStyle()},void 0,o()("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:12,width:"100%"}},void 0,o()("div",{style:{flex:1}},void 0,o()(f.Z,{},void 0,o()(d.FormattedMessage,{id:"userDataConsentSettings.header.label",defaultMessage:"Support access"})),o()(v.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4,width:"80%"}},void 0,t&&e.expiryTime?o()(d.FormattedMessage,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:c.Z.unix(e.expiryTime/1e3).locale(this.props.intl.locale).format("lll")}}):o()(d.FormattedMessage,{id:"userDataConsentSettings.accessNotGranted.label",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."})),o()(h.Z,{onClick:s,isLarge:!0,style:{marginTop:12,marginBottom:4}},void 0,o()(d.FormattedMessage,t?{id:"userDataConsentSettings.revokeSupportAccess.button",defaultMessage:"Revoke access"}:{id:"userDataConsentSettings.allowSupportAccess.button",defaultMessage:"Allow support access"})))))})),n()(this,"fetchUserDataConsentSettings",(async e=>{const t=await u.getDataAccessConsent(this.environment,{});if("failed"===t.type)throw t.error;return t.data})),n()(this,"grantDataAccess",(async()=>{await this.setDataAccessExpiryTime({expiryTime:Date.now()+14*l.A0})})),n()(this,"revokeDataAccess",(async()=>{await this.setDataAccessExpiryTime({})})),n()(this,"setDataAccessExpiryTime",(async e=>{const t=await u.setDataAccessConsent(this.environment,e);if("success"===t.type&&t.data){const e=this.stores.requestStore.state;this.stores.requestStore.setState({...e,result:t.data})}}))}renderComponent(){const{currentUserStore:e}=p.default.state;return e&&o()(b.Z,{requestStore:this.stores.requestStore,request:{userId:e.id,expiryTime:Date.now()+14*l.A0},performRequest:this.fetchUserDataConsentSettings,render:this.renderResult})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}const y=(0,d.injectIntl)(S)},40394:(e,t,s)=>{s.d(t,{b:()=>g,D:()=>h});var i=s(77094),o=s.n(i),r=(s(85827),s(33948),s(67294)),n=s.n(r),a=s(24405),l=s(53397),d=s(82990),u=s(12534),c=s(75024),p=s(82970),m=s(42001);function g(e){let{columnRenderInfo:t,theme:s,containerMarginTop:i}=e;return{container:{marginTop:null!=i?i:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:t.reduce(((e,t)=>e+M(t.widthData)+y),0)},tableHeaderRow:{borderTop:"1px solid ".concat(s.tableDividerColor),borderBottom:"1px solid ".concat(s.tableDividerColor)},paddingRowCell:{height:8}}}function h(e){let{columnRenderInfo:t,sortState:s,onSortStateChanged:i,showRowBorders:a,hideHeaderRowPadding:l,renderRowChild:d,rows:u,onRowClick:c,renderNoRowsComponent:p,styles:m,getStyleForRow:g,multiselect:h}=e;const v=(0,r.useCallback)((e=>{var t;if(!s)return;const o=e.id===(null===(t=s.column)||void 0===t?void 0:t.id)&&!s.sortAscending;i&&i({sortAscending:o,column:e})}),[s,i]);return n().createElement(n().Fragment,null,o()("table",{style:m.container},void 0,o()("tr",{style:m.tableHeaderRow},void 0,t.map(((e,t)=>o()(b,{index:t,column:e,sortState:s,handleSortableColumnClick:v,shouldShowSortIcon:0!==u.length,multiselect:h},"header_".concat(e.id))))),!l&&o()("tr",{},void 0,t.map((e=>o()("td",{style:m.paddingRowCell},"padding_row_".concat(e.id))))),u.map((e=>o()(f,{columns:t,onRowClick:c,rowChild:null==d?void 0:d(e),showRowBorders:a,row:e,getStyleForRow:g,multiselect:h},"".concat(e.id,"_row"))))),0===u.length&&p())}function b(e){let{column:t,index:s,sortState:i,handleSortableColumnClick:r,shouldShowSortIcon:n,multiselect:u}=e;const c=(0,a.y)((e=>({th:k(t),innerDiv:{display:"flex",alignItems:"center",minWidth:M(t.widthData),height:32},text:{fontSize:d.Z.fontSize.UISmall.desktop,fontWeight:d.Z.fontWeight.regular,color:e.mediumTextColor,...d.Z.textOverflowStyle},sortButton:{padding:5,margin:-5},sortIcon:{color:e.mediumTextColor,width:12,height:12,marginLeft:4,fill:"currentColor"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:16,opacity:null!=u&&u.header.isDisabled?.5:1}})),[t,u]),g=o()("div",{style:c.text},void 0,t.headerTitle),h=t.sortable?o()(m.Z,{style:c.sortButton,onClick:()=>r(t)},void 0,g,(()=>{if(i&&n&&t.id===i.column.id)return l.Z.arrowDownSmall({...c.sortIcon,...i.sortAscending&&{transform:"rotate(180deg)"}})})()):g,b=void 0!==u&&0===s?o()(p.Z,{style:c.multiselectCheckbox,disabled:u.header.isDisabled,onClick:()=>u.header.onClick(),checked:u.header.isSelected,size:14}):null;return o()("th",{style:c.th},void 0,o()("div",{style:c.innerDiv},void 0,b,h))}function f(e){let{row:t,columns:s,onRowClick:i,rowChild:l,showRowBorders:d,getStyleForRow:u,multiselect:c}=e;const[p,m]=(0,r.useState)(!1),g=t.isClickable,h=(0,r.useCallback)((()=>m(!0)),[]),b=(0,r.useCallback)((()=>m(!1)),[]),f=(0,r.useCallback)((e=>{g&&void 0!==i&&S(e,(()=>i(t.id)))}),[g,i,t.id]),y=(0,a.y)((e=>({row:{height:1,...g&&{cursor:"pointer"},...d&&{borderBottom:"1px solid ".concat(e.tableDividerColor)},...u&&u(t)}})),[g,d,u,t]);return n().createElement(n().Fragment,null,o()("tr",{onMouseLeave:b,onMouseEnter:h,style:y.row,onClick:f},void 0,s.map(((e,i)=>o()(v,{isRowHovered:p,isRowClickable:g,columnIndex:i,numColumns:s.length,data:t,column:e,multiselect:c},"cell_".concat(t.id,"_").concat(e.id))))),l&&o()("tr",{style:y.row},void 0,o()("td",{colSpan:s.length},void 0,l)))}function v(e){let{data:t,column:s,columnIndex:i,numColumns:r,isRowHovered:n,isRowClickable:l,multiselect:u}=e;const m=0===i,g=i===r-1,h=(0,a.y)((e=>({td:{...k(s),height:"inherit",...m&&{borderRadius:(0,c.wK)({topLeft:3,bottomLeft:3})},...g&&{borderRadius:(0,c.wK)({topRight:3,bottomRight:3})},...n&&l&&{background:e.buttonHoveredBackground}},innerDiv:{minWidth:M(s.widthData),fontSize:d.Z.fontSize.UIRegular.desktop,color:e.regularTextColor,minHeight:42,height:"100%",display:"flex",alignItems:"center"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:16,opacity:null!=u&&u.row.getDisabledState(t)?.5:1}})),[s,m,g,n,l,u,t]),b=Boolean(s.hasClickableContents),f=u&&m?o()(p.Z,{style:h.multiselectCheckbox,checked:u.row.getSelectedState(t),onClick:()=>u.row.onClick(t),disabled:u.row.getDisabledState(t),size:14}):null;return o()("td",{style:h.td},void 0,o()("div",{style:h.innerDiv,onClick:b?S:void 0},void 0,f,s.renderCell({...t,isRowHovered:n})))}const S=(e,t)=>{(0,u.ZP)({event:e,context:u.Af.BaseTableRowClick,callback:t})},y=10,w={paddingLeft:y/2,paddingRight:y/2};function M(e){return"minWidth"in e?e.minWidth:e.width}function k(e){let t;return t="width"in e.widthData?{width:e.widthData.width}:{width:"".concat(e.widthData.widthPercent,"%"),minWidth:e.widthData.minWidth},{...w,...t}}},83890:(e,t,s)=>{s.d(t,{Z:()=>C});var i=s(97464),o=s.n(i),r=s(77094),n=s.n(r),a=s(77422),l=s.n(a),d=(s(33948),s(67294)),u=s.n(d),c=s(83355),p=s(66897),m=s(53397),g=s(19889),h=s(5366),b=s(31299),f=s(20454),v=s(255),S=s(43997),y=s(35223),w=s(97680),M=s(98707);class k extends c.Z{constructor(){super(...arguments),l()(this,"renderFilterListItem",((e,t)=>{let{disabled:s,onRemove:i,onClick:o}=t;const r=this.styles,a=this.getUserValue(e),l=n()(v.Z,{disabled:s,onClick:i});return n()(w.Z,{disabled:s,focused:!1,user:a,right:l,style:r.menuItem,desktopTitleStyle:r.menuItemTitle,onClick:o},e)})),l()(this,"renderItemForSummary",(e=>(0,g.Nz)(this.props.intl,this.getUserValue(e)))),l()(this,"renderToken",((e,t)=>{const{userIds:s}=this.props,i=1===s.length,o=this.getUserValue(e);if(o)return n()(S.ZP,{format:this.environment.device.isMobile?y.Z.Format.Large:y.Z.Format.Small,showRemoveButton:!0,isSingle:i,onClickRemove:t.onRemove,actor:(0,p.m3)(o),shouldShrink:!0,backgroundColor:"transparent"},e)})),l()(this,"renderResultMenuItem",((e,t)=>{const s=this.getUserValue(e);return u().createElement(w.Z,o()({},t,{key:e,user:s}))})),l()(this,"performRequest",(async e=>{let{query:t,current:s}=e;const i=new Set(s);return(await b.O$({environment:this.environment,query:t,membersOnly:!1})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))})),l()(this,"getUserValue",(e=>this.createUserStore(e).getValue())),l()(this,"createUserStore",(e=>{const{parentStore:t}=this.props;return f.Z.createChildStore(t,{table:g.KJ,id:e})})),l()(this,"styles",{menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}})}renderComponent(){const{mode:e,title:t,userIds:s,onChange:i,disabled:o,focused:r,onMenuDismiss:a,intl:l}=this.props;return n()(M.Z,{mode:e,title:t,icon:m.Z.person,iconStyles:this.styles.recordIcon,items:s,onChange:i,disabled:o,focused:r,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:n()(h.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:l.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:a,hasItemsSelected:(null==s?void 0:s.length)>0})}}const C=(0,h.injectIntl)(k)},31689:(e,t,s)=>{s.d(t,{u:()=>r});var i=s(28350),o=s(95155);function r(){return(0,i.VK)((()=>"on"===o.default.getGroup("show_workspace_owner")),[])}},53680:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(49085);class o extends i.Z{getInitialState(){return{disablePublicAccess:!1,disableGuests:!1,disableMoveToSpace:!1,disableExport:!1,disableSpacePageEdits:!1,disablePublicAccessRequests:!1,disablePersonalBots:!1,disableTeamCreation:!1,disableMembershipRequests:!1}}getValueForSpace(e){const t=e.getValue();if(t){const{disable_public_access:e,disable_guests:s,disable_move_to_space:i,disable_export:o,disable_space_page_edits:r,disable_public_access_requests:n,disable_team_creation:a,settings:l,bot_settings:d}=t;return{disablePublicAccess:Boolean(e),disableGuests:Boolean(s),disableMoveToSpace:Boolean(i),disableExport:Boolean(o),disableSpacePageEdits:Boolean(r),disablePublicAccessRequests:Boolean(n),disablePersonalBots:Boolean(null==d?void 0:d.disable_personal_bots),disableTeamCreation:Boolean(a),disableMembershipRequests:Boolean(null==l?void 0:l.disable_membership_requests)}}}}const r=o}}]);