"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[259],{31263:(e,t,o)=>{o.r(t),o.d(t,{AppsSetup:()=>L});var i=o(77094),n=o.n(i),r=(o(33948),o(96486)),s=o.n(r),a=o(67294),l=o.n(a),d=o(13991),c=o(480),p=o(28350),u=o(24405),g=o(66673),h=o(21202),m=o(82990),v=o(5366),f=o(54885),b=o(90922),w=o(63779),y=o(93561),x=o(28020),k=o(93959),S=o(54258),C=o(23537),B=o(27832),I=o(36324),W=o(82136),P=o(80270),Z=o(20431),H=o(72693),M=o(68932),A=o(60588),R=o(53397),D=o(14947);function F(e){const{appTemplate:t,isSelected:o}=e,[i,r]=(0,a.useState)(!1),s=(0,p.VK)((()=>(0,k.SP)(t.uri)),[t.uri]),l=(0,u.y)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},appButton:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:62,height:62,backgroundColor:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,borderRadius:12,background:"dark"===e.mode?e.accentColors.gray[200]:e.whiteButtonBackground},selectedWrapper:{boxShadow:e.outlineBlueInputBoxShadow,background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground},logo:{width:32,height:32},logoSelected:{filter:"invert(40%) sepia(61%) saturate(4508%) hue-rotate(171deg) brightness(108%) contrast(84%) grayscale(20%)"},badge:{width:26,height:26,display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:e.invoiceGreen,borderRadius:50,position:"absolute",top:-9,right:-9,border:"2px solid ".concat(e.sidebarBackground),webkitBackdropFilter:"blur(12px)",opacity:1,transform:"scale(1)",transition:"opacity 0.2s ease, transform 0.2s ease, background-color 0.1s linear"},selectBadge:{backgroundColor:e.invoiceGreen},selectedBadge:{backgroundColor:e.blueButtonBackground},deselectBadge:{backgroundColor:e.redBadgeBackground},appName:{marginTop:8,fontSize:14,fontWeight:500,textAlign:"center"},buttonBadgeIcon:{width:16,height:16,fill:"white"}})),[]),d=(0,a.useCallback)((()=>{o?e.onDeSelect(t.uri):e.onSelect(t.uri),r(!1)}),[t.uri,o,e]);return n()("div",{style:l.container,onMouseEnter:()=>{r(!0),e.onHover()},onMouseLeave:()=>{r(!1),e.onUnhover()}},void 0,n()(D.Z,{style:{...l.appButton,...o?l.selectedWrapper:{}},onClick:d,ignoreLocalHoverState:!0},void 0,n()("img",{style:{...l.logo,...o?l.logoSelected:{}},src:s?s.logo:t.icon})),n()(D.Z,{style:{...l.badge,...o?i?l.deselectBadge:l.selectedBadge:i?l.selectBadge:{opacity:0,transform:"scale(0.4)"}},onClick:d,ignoreLocalHoverState:!0},void 0,o?i?R.Z.closeSmall({width:16,height:16,fill:"white"}):R.Z.thinCheck({width:15,height:15,fill:"white"}):R.Z.plusThick({width:16,height:16,fill:"white"})),n()("div",{style:l.appName},void 0,s?s.name:t.shortName))}const T=s().compact(["notion://wiki/company_home_preset","notion://projects/projects_preset","notion://docs/simple_docs_preset","notion://meetings/meetings_preset"].map((e=>{var t;return null===(t=(0,k.SP)(e))||void 0===t?void 0:t.presets.find((t=>t.uri===e))})));function U(e){const t=(0,c.O7)(),o=(0,p.VK)((()=>{const e=(0,x.ui)(t);return{left:e,right:e,bottom:A.Z.paddingBottom(t),coverHeight:A.Z.defaultPageCoverHeight(t)}}),[t]),i=l().useMemo((()=>{const e={};return T.forEach((o=>{var i;const n=o.uri.startsWith("notion://wiki")?(0,S.L)(o):null===(i=o.previews)||void 0===i?void 0:i.find((e=>"previewRootId"in e));n&&(e[o.uri]=new P.Z(t,{id:n.previewRootId,table:h.iU,spaceId:n.spaceId}))})),e}),[t]),r=e.presetUri.startsWith("notion://wiki"),s=i[e.presetUri];return s?n()("div",{style:{minWidth:900,height:"100%",position:"relative",paddingTop:r?0:"10%"}},void 0,n()(A.Z,{store:s,loadingContainerStore:void 0,context:W.S.InAppTemplatePreview,titleFontSize:r?void 0:28,paddingBottom:o.bottom,paddingLeft:o.left,paddingRight:o.right,pageCoverHeight:o.coverHeight,disabled:!0},s.id),n()("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999,cursor:"pointer"}})):null}function _(e){const t=(0,a.useCallback)(((e,t)=>(e%t+t)%t),[]),o=(0,g.Kt)(e.forceIndex,200,((e,t)=>e===t)),[i,r]=(0,a.useState)(0);(0,a.useEffect)((()=>{if(void 0===o)return;const n=t(-i,e.items.length),s=t(o-n,e.items.length);r((e=>e-s))}),[i,r,o,t,e.items.length]),(0,a.useEffect)((()=>{var t;const i=setInterval((()=>{void 0===o&&r((e=>e-1))}),null!==(t=e.rotationDelayMs)&&void 0!==t?t:2500);return()=>{clearInterval(i)}}),[r,o,e.rotationDelayMs]);const l=(0,u.y)((e=>({item:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"white",borderRadius:8,border:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 16px 24px rgba(0, 0, 0, 0.06), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",overflow:"hidden",transition:"transform 0.5s ease-in-out, opacity 0.5s ease-out"}})),[]),d=e.items.length,c=t(-i,d),p=e.items[t(c-1,d)].node,h=e.items[c].node,m=[...s().times(d,(e=>({key:"before".concat(e),node:null}))),...e.items,...s().times(d,(e=>({key:"after".concat(e),node:null})))],v=m.map(((o,r)=>{var s;let{key:a}=o;const c=t(r+i,m.length),u=c>=d&&c<2*d,g=(c-d)*(null!==(s=e.offset)&&void 0!==s?s:12),v=c<d?1.05:1,f="translateX(".concat(g,"px) translateY(").concat(g,"px) scale(").concat(v,")"),b=u?1:0;return n()("div",{style:{...l.item,zIndex:m.length-c,transform:f,opacity:b}},a,c===d?h:c===d-1?p:void 0)}));return n()("div",{style:{position:"relative",...e.style}},void 0,v)}function L(e){const[t]=(0,p.oR)(I.default),[{currentUserRootStore:o,currentSpaceViewStore:i,currentSpaceStore:r,currentUserSettingsStore:g}]=(0,p.oR)(B.default),h=(0,c.O7)(),[x,S]=(0,a.useState)(!1),[W,P]=(0,a.useState)(void 0),A=(0,u.y)((e=>({container:{backgroundColor:e.sidebarBackground,width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderLeft:"1px solid ".concat(e.lightDividerColor)},left:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:"10%",marginRight:"10%",padding:"42px 16px",overflowX:"visible",overflowY:"auto"},right:{flex:1,height:"70%",overflow:"visible"},header:{position:"relative",textAlign:"left",paddingBottom:42},title:{fontWeight:m.Z.fontWeight.semibold,fontSize:28,lineHeight:1.2,color:e.regularTextColor,fontFamily:m.Z.getHeaderFontFamily({locale:d.SP}),marginBottom:16,width:"90%"},subtitle:{fontSize:18,lineHeight:1.45,paddingTop:2,color:e.mediumTextColor,fontWeight:m.Z.fontWeight.regular},apps:{marginBottom:48,display:"inline-flex",flexWrap:"wrap",justifyContent:"space-between"},previewImage:{width:"100%",height:"100%"}})),[]);if(!i||!o||!g)return null;if(!t.isOnboarding||"workspace_setup"!==t.stage)return null;const R=e=>{const o=s().uniq([...t.selectedPresets,e]),i=s().sortBy(o,(e=>T.findIndex((t=>t.uri===e))));I.default.setState({...t,selectedPresets:i}),(0,f.X3)(h,{action:"select",preset:e})},D=e=>{const o=t.selectedPresets.filter((t=>t!==e));I.default.setState({...t,selectedPresets:o}),(0,f.X3)(h,{action:"deselect",preset:e})},L=t.selectedPresets.length>0?t.selectedPresets:T.map((e=>e.uri)),z=L.findIndex((e=>(null==W?void 0:W.uri)===e)),j=n()(_,{style:{width:"100%",height:"100%"},items:L.map((e=>({key:e,node:n()(U,{presetUri:e})}))),forceIndex:z>-1?z:void 0});return l().createElement(l().Fragment,null,n()("div",{style:A.container},void 0,n()("div",{style:A.left},void 0,n()("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"}},void 0,n()("div",{style:A.header},void 0,n()("div",{style:A.title},void 0,n()(v.FormattedMessage,{id:"apps.workspacesetup.header.title",defaultMessage:"Get started with Notion",description:"Header shown during onboarding to Get Started with Notion"})),n()("div",{style:A.subtitle},void 0,n()("div",{},void 0,n()(v.FormattedMessage,{id:"apps.workspacesetup.header.description",defaultMessage:"Add templates to your workspace, and customize them in a few simple steps."})))),n()("div",{style:A.apps},void 0,T.map((e=>n()(F,{appTemplate:e,isSelected:t.selectedPresets.includes(e.uri),onSelect:R,onDeSelect:D,onHover:()=>P(e),onUnhover:()=>P(void 0)})))),t.selectedPresets.length>0?n()(H.Z,{isLarge:!0,style:{height:40},onClick:async()=>{if(!r)return;S(!0);const{performResult:{collectionViewBlockStores:e}}=(0,y.createAndCommit)({environment:h,userAction:"AppsSetup.onContinueWithApps",perform:e=>({collectionViewBlockStores:s().flatten(s().compact(t.selectedPresets.map((t=>{var o,n;const s=null===(o=(0,k.SP)(t))||void 0===o?void 0:o.uri;if(!s)return;const a=null===(n=i.getTeamsStores()[0])||void 0===n?void 0:n.id,l=Z.Z.createChildStore(r,{table:"team",id:a,spaceId:r.id});return(0,b.b1)({environment:h,appUri:s,parentStore:(0,C.bq)()?l:r,spaceId:r.id,transaction:e,presetUri:t})}))))})});e.length>0&&(t.redirectData={type:"redirect_page",pageId:e[0].id,spaceId:r.id},I.default.setState(t)),await(0,w.lp)(h,t)},disabled:x},void 0,x?n()(M.Z,{isWhite:!0}):n()(v.FormattedMessage,{id:"apps.workspacesetup.button.continueWithChosenApps",defaultMessage:"{num, plural, one {Continue with 1 template} other {Continue with {num} templates}}",values:{num:t.selectedPresets.length}})):n()(H.Z,{isLarge:!0,style:{height:40},onClick:async()=>{S(!0),await(0,w.lp)(h,t)},disabled:x},void 0,x?n()(M.Z,{isWhite:!0}):n()(v.FormattedMessage,{id:"apps.workspacesetup.button.continueWithoutChoosingApps",defaultMessage:"I'll add templates later"})))),!h.device.isPhone&&n()("div",{style:A.right},void 0,j)))}}}]);